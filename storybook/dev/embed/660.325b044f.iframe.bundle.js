(self.webpackChunkfasten_connect_frontend_ngx=self.webpackChunkfasten_connect_frontend_ngx||[]).push([[660],{"./projects/fasten-connect-stitch-embed/src/app/app.routes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>routes});var vault_profile_signin_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin/vault-profile-signin.component.ts"),vault_profile_signin_code_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.ts"),identity_verification_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification/identity-verification.component.ts"),dashboard_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/dashboard/dashboard.component.ts"),health_system_search_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-search/health-system-search.component.ts"),health_system_brand_details_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-brand-details/health-system-brand-details.component.ts"),health_system_connecting_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-connecting/health-system-connecting.component.ts"),complete_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/complete/complete.component.ts"),form_health_system_request_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/form-health-system-request/form-health-system-request.component.ts"),form_support_request_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/form-support-request/form-support-request.component.ts"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),auth_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/auth.service.ts"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs");let IsAuthenticatedAuthGuard=class IsAuthenticatedAuthGuard{constructor(authService,router,configService,logger){this.authService=authService,this.router=router,this.configService=configService,this.logger=logger}canActivate(route,state){var _this=this;return(0,asyncToGenerator.A)((function*(){return _this.configService.systemConfig$.searchOnly?Promise.resolve(!0):_this.authService.GetJWTPayload().then((jwtPayload=>!!jwtPayload||("/auth/signin"===route.url.toString()||(_this.logger.info("User is not authenticated, redirecting to login page"),_this.router.navigate(["/auth/signin"]))))).catch((err=>(_this.logger.error("error checking if user is authenticated, forcing user back to /auth/signin",err),_this.router.navigate(["/auth/signin"]))))}))()}static{this.ctorParameters=()=>[{type:auth_service.u},{type:router.Ix},{type:public_api.we},{type:ngx_logger.so}]}};IsAuthenticatedAuthGuard=(0,tslib_es6.Cg)([(0,core.Injectable)()],IsAuthenticatedAuthGuard);var identity_verification_error_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification-error/identity-verification-error.component.ts");let IsTefcaModeAuthGuard=class IsTefcaModeAuthGuard{constructor(authService,router,configService,logger){this.authService=authService,this.router=router,this.configService=configService,this.logger=logger}canActivate(route,state){var _this=this;return(0,asyncToGenerator.A)((function*(){return _this.configService.systemConfig$.tefcaMode?_this.authService.GetJWTPayload().then((jwtPayload=>jwtPayload?!!jwtPayload.has_verified_identity||("/auth/identity/verification"===route.url.toString()||(_this.logger.info("Profile does not have a verified identity, redirecting to id verification step",jwtPayload),_this.router.navigate(["/auth/identity/verification"]))):"/auth/signin"===route.url.toString()||(_this.logger.info("User is not authenticated, redirecting to login page"),_this.router.navigate(["/auth/signin"])))).catch((err=>(_this.logger.error("error checking if user is authenticated, forcing user back to /auth/signin",err),_this.router.navigate(["/auth/signin"])))):Promise.resolve(!0)}))()}static{this.ctorParameters=()=>[{type:auth_service.u},{type:router.Ix},{type:public_api.we},{type:ngx_logger.so}]}};IsTefcaModeAuthGuard=(0,tslib_es6.Cg)([(0,core.Injectable)()],IsTefcaModeAuthGuard);const routes=[{path:"auth/signin",component:vault_profile_signin_component.h},{path:"auth/signin/code",component:vault_profile_signin_code_component.Q},{path:"auth/identity/verification",component:identity_verification_component.P},{path:"auth/identity/verification/error",component:identity_verification_error_component.l},{path:"dashboard",component:dashboard_component.S,canActivate:[IsAuthenticatedAuthGuard,IsTefcaModeAuthGuard]},{path:"search",component:health_system_search_component.v,canActivate:[IsAuthenticatedAuthGuard]},{path:"brand/details",component:health_system_brand_details_component.Q,canActivate:[IsAuthenticatedAuthGuard]},{path:"dashboard/connecting",component:health_system_connecting_component.D},{path:"dashboard/complete",component:complete_component.l},{path:"form/healthsystem",component:form_health_system_request_component.i},{path:"form/support",component:form_support_request_component.W},{path:"",redirectTo:"/auth/signin",pathMatch:"full"},{path:"**",redirectTo:"auth/signin"}]},"./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>HeaderComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var header_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.css?ngResource"),header_componentngResource_default=__webpack_require__.n(header_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let HeaderComponent=class HeaderComponent{constructor(){this.backButtonLink="",this.backButtonEvent=new core.EventEmitter,this.showClose=!1,this.closeButtonEvent=new core.EventEmitter}ngOnInit(){}backButtonClick(e){console.log("header: back button clicked"),this.backButtonEvent.emit(e)}closeButtonClick(e){console.log("header: close button clicked"),this.closeButtonEvent.emit(e)}static{this.ctorParameters=()=>[]}static{this.propDecorators={backButtonLink:[{type:core.Input}],backButtonEvent:[{type:core.Output}],showClose:[{type:core.Input}],closeButtonEvent:[{type:core.Output}]}}};HeaderComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-header",template:'<div class="relative flex justify-center items-center">\n  <button id="stitch-back" *ngIf="backButtonLink" type="button"\n          (click)="backButtonClick($event)" [routerLink]="backButtonLink"\n          class="absolute left-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md">\n    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />\n    </svg>\n  </button>\n  <button id="stitch-close" *ngIf="showClose" type="button"\n          (click)="closeButtonClick($event)"\n          class="absolute right-0 top-1/2 -translate-y-1/2 text-gray-700 p-2 hover:bg-gray-100 rounded-md">\n    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">\n      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />\n    </svg>\n  </button>\n  <h1 class="az-logo">fasten</h1>\n</div>\n',standalone:!0,imports:[common.MD,router.iI],styles:[header_componentngResource_default()]})],HeaderComponent)},"./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>SpinnerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var spinner_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.css?ngResource"),spinner_componentngResource_default=__webpack_require__.n(spinner_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let SpinnerComponent=class SpinnerComponent{constructor(){}ngOnInit(){}static{this.ctorParameters=()=>[]}};SpinnerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-spinner",template:'<svg class="mr-2 h-5 w-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>\n</svg>\n',standalone:!0,imports:[common.MD],styles:[spinner_componentngResource_default()]})],SpinnerComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/complete/complete.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/complete/complete.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>CompleteComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var complete_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/complete/complete.component.css?ngResource"),complete_componentngResource_default=__webpack_require__.n(complete_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts");let CompleteComponent=class CompleteComponent{constructor(configService,messageBus){this.configService=configService,this.messageBus=messageBus}ngOnInit(){this.messageBus.publishComplete()}closeModal(){this.messageBus.publishRequestClose()}static{this.ctorParameters=()=>[{type:public_api.we},{type:public_api.BG}]}};CompleteComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-complete",template:'\x3c!-- Step: COMPLETION --\x3e\n<div id="step-completion" class="text-center space-y-6">\n  <app-header></app-header>\n\n  <div class="w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle">\n    <svg class="w-8 h-8 text-[#5B47FB]" fill="none" stroke="currentColor" stroke-width="2.5"\n         viewBox="0 0 24 24">\n      <path class="success-check" stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />\n    </svg>\n  </div>\n\n  <div class="space-y-2">\n    <h2 class="text-2xl font-bold">Success!</h2>\n    <p class="text-gray-600">\n      Your health records have been successfully linked with {{(configService.systemConfigSubject | async)?.org?.name || \'Unknown\'}}.\n      You can now close this window.\n    </p>\n  </div>\n\n  <button (click)="closeModal()" id="completion-close" class="bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md">\n    Close\n  </button>\n</div>\n\x3c!-- End Step: COMPLETION --\x3e\n',standalone:!0,imports:[common.MD,header_component.l],styles:[complete_componentngResource_default()]})],CompleteComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/dashboard/dashboard.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.blurred {\n\n  /* Any browser which supports CSS3 */\n  filter: blur(3px);\n\n  /* Firefox version 34 and earlier */\n  filter: url("/assets/blur.svg#gaussian_blur");\n\n  /* Webkit in Chrome 52, Safari 9, Opera 39, and earlier */\n  -webkit-filter: blur(3px);\n}\n',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/dashboard/dashboard.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>DashboardComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var dashboard_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/dashboard/dashboard.component.css?ngResource"),dashboard_componentngResource_default=__webpack_require__.n(dashboard_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),switchMap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),connect_helper=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/utils/connect-helper.ts");let DashboardComponent=class DashboardComponent{constructor(configService,router,fastenService,messageBus,logger){this.configService=configService,this.router=router,this.fastenService=fastenService,this.messageBus=messageBus,this.logger=logger,this.loadingTefcaRLS=!1}ngOnInit(){this.configService.systemConfig$.tefcaMode&&!this.configService.vaultProfileConfig$.rlsQueryComplete&&(this.loadingTefcaRLS=!0,this.fastenService.recordLocatorRegisterAndPollForStatus().pipe((0,switchMap.n)((rlsStatusResponse=>{if("success"==rlsStatusResponse.data.status)return console.log("RLS status response",rlsStatusResponse),this.fastenService.recordLocatorResults(rlsStatusResponse.data.task_id);throw console.log("RLS status response was not successful",rlsStatusResponse),new Error("RLS status response was not successful")}))).subscribe((rlsResponse=>{console.log("record locator response",rlsResponse);for(let vaultProfileConnectionId in rlsResponse.discovered_patient_accounts){const discoveredFacility=rlsResponse.discovered_patient_accounts[vaultProfileConnectionId];this.configService.vaultProfileAddDiscoveredRecordLocatorAccount(discoveredFacility,vaultProfileConnectionId),console.log("DISCOVERED",discoveredFacility)}for(let vaultProfileConnectionId in rlsResponse.pending_patient_accounts){const pendingFacility=rlsResponse.pending_patient_accounts[vaultProfileConnectionId];this.configService.vaultProfileAddPendingRecordLocatorAccount(pendingFacility,vaultProfileConnectionId),console.log("PENDING",pendingFacility)}this.loadingTefcaRLS=!1,this.configService.vaultProfileConfig={rlsQueryComplete:!0}}),(err=>{this.loadingTefcaRLS=!1,console.error("Error fetching RLS data",err)})))}connectAccount(externalState,pendingAccount){this.logger.info("connecting account",pendingAccount),this.router.navigate(["dashboard/connecting"],{queryParams:{brandId:pendingAccount.brand?.id,portalId:pendingAccount.portal?.id,endpointId:pendingAccount.endpoint?.id,externalId:this.configService.systemConfig$.externalId,externalState,vaultProfileConnectionId:pendingAccount.vault_profile_connection_id}})}connectTefcaDirectAccount(externalState,pendingAccount){this.configService.vaultProfileAddConnectedAccount({external_state:externalState,org_connection_id:"",connection_status:"connected",platform_type:"tefca",brand_id:pendingAccount.brand?.id,portal_id:pendingAccount.portal?.id,endpoint_id:pendingAccount.endpoint?.id,vault_profile_connection_id:pendingAccount.vault_profile_connection_id,patient_auth_type:public_api.H7.SourceCredentialTypeTefcaDirect})}completeAccounts(){const vaultConnectionIds=(this.configService.vaultProfileConfig$.connectedPatientAccounts||[]).filter((acc=>acc.patient_auth_type===public_api.H7.SourceCredentialTypeTefcaDirect)).map((a=>a.vault_profile_connection_id)).filter((id=>!!id)),uniqueVaultConnectionIds=Array.from(new Set(vaultConnectionIds));0!==uniqueVaultConnectionIds.length?(this.loadingTefcaRLS=!0,this.fastenService.authorizeTefcaDirect(uniqueVaultConnectionIds,this.configService.systemConfig$.externalId).subscribe((resp=>{this.logger.info("TEFCA Direct authorization response",resp),(0,connect_helper.H)(uniqueVaultConnectionIds,resp),this.loadingTefcaRLS=!1,this.router.navigateByUrl("dashboard/complete")}),(err=>{this.logger.error("Failed to authorize TEFCA Direct accounts",err),(0,connect_helper.H)(uniqueVaultConnectionIds,null),this.loadingTefcaRLS=!1,this.router.navigateByUrl("dashboard/complete")}))):this.router.navigateByUrl("dashboard/complete")}closeModal(){this.messageBus.publishRequestClose()}static{this.ctorParameters=()=>[{type:public_api.we},{type:router.Ix},{type:fasten_service.B},{type:public_api.BG},{type:ngx_logger.so}]}};DashboardComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-dashboard",template:'<div id="step-connecting-systems" class="space-y-6">\n  <app-header [showClose]="true" (closeButtonEvent)="closeModal()"></app-header>\n\n  <div class="space-y-2">\n    <h2 class="text-xl font-bold">Select Health Systems</h2>\n    <p class="text-sm text-gray-600">\n      Choose the health systems you\'d like to connect\n    </p>\n  </div>\n\n  <div *ngIf="((configService.systemConfigSubject | async)?.tefcaMode)" class="p-4 mb-4 text-sm text-blue800 rounded-lg bg-blue-50 border border-blue-300 flex items-center gap-2" role="alert">\n    <div>\n      <p>Thank you for verifying your identity using\n        <img src="data:image/svg+xml,%3Csvg fill=\'none\' height=\'129\' viewBox=\'0 0 477 129\' width=\'477\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'%23041a55\'%3E%3Cpath d=\'m43.6629 11.002c.8485.6349 1.9184.971 2.9513.971.2952 0 .5903-.0373.8485-.0747 2.8038-.4855 4.6483-3.17438 4.2056-5.97532-.2213-1.34445-.9591-2.57686-2.0659-3.36113-2.2503-1.755252-5.4599-1.3071-7.1938.97099-1.7338 2.2781-1.2911 5.52719.9592 7.28246.1107.0747.1845.112.2951.1867z\'/%3E%3Cpath d=\'m81.3643 11.4122c.7009.3735 1.5126.5602 2.2873.5602.5533 0 1.1067-.112 1.6232-.2987 2.7299-.9337 4.1687-3.92135 3.2464-6.6476-.4427-1.3071-1.365-2.39013-2.5824-2.98766-2.5455-1.307108-5.6812-.22408-6.9355 2.35279-1.2543 2.57686-.1845 5.71387 2.361 7.02097z\'/%3E%3Cpath d=\'m115.228 23.811c-2.73-.859-5.644.6722-6.493 3.4358-.848 2.7636.664 5.7139 3.394 6.5729.517.1494 1.033.2241 1.55.2241.848 0 1.66-.2241 2.398-.5976 2.545-1.3444 3.504-4.4815 2.213-7.0584-.664-1.2324-1.734-2.166-3.062-2.5768z\'/%3E%3Cpath d=\'m129.284 61.271c-1.697-2.3155-4.943-2.801-7.267-1.0457-2.325 1.7552-2.767 5.0043-1.033 7.3571 1.697 2.3155 4.943 2.801 7.267 1.0457 1.107-.8216 1.808-2.054 2.029-3.4358.185-1.3818-.184-2.8009-.996-3.9213z\'/%3E%3Cpath d=\'m113.642 94.7637h-.073c-2.952.1494-5.239 2.6515-5.091 5.6393.11 2.801 2.361 5.079 5.164 5.154h.111c2.951-.15 5.239-2.652 5.091-5.6396-.111-2.8009-2.361-5.079-5.165-5.1537z\'/%3E%3Cpath d=\'m86.6756 117.959c-2.3242-1.681-5.5706-1.121-7.2307 1.232s-1.1067 5.639 1.2174 7.32c2.3242 1.68 5.5706 1.12 7.2307-1.233.8116-1.12 1.1067-2.539.8854-3.921-.2214-1.382-.9961-2.577-2.1028-3.398z\'/%3E%3Cpath d=\'m44.9511 117.36c-2.6562.934-4.095 3.847-3.1727 6.536.7009 2.091 2.6193 3.473 4.7959 3.473.5533 0 1.0698-.112 1.6232-.262 2.693-.784 4.2794-3.622 3.5046-6.348-.7747-2.727-3.5784-4.333-6.2715-3.548-.1475.037-.332.112-.4795.149z\'/%3E%3Cpath d=\'m18.1691 95.1782c-2.73-.859-5.6444.6722-6.4929 3.4358-.8485 2.764.6641 5.714 3.394 6.573.5165.149 1.033.224 1.5495.224 2.8775 0 5.2016-2.39 5.1647-5.266 0-2.2779-1.4756-4.2946-3.6153-4.9668z\'/%3E%3Cpath d=\'m2.08517 60.1841c-2.287253 1.7179-2.766839 5.0043-1.06984 7.3198 1.69699 2.3154 4.94342 2.8009 7.23068 1.083 2.28729-1.7179 2.76679-5.0043 1.06984-7.3198-1.69699-2.3154-4.94342-2.8009-7.23068-1.083z\'/%3E%3Cpath d=\'m16.6203 34.0467h.0738c2.8406-.1121 5.0541-2.5769 4.9434-5.4525-.1106-2.7263-2.2872-4.9297-5.0172-5.0044h-.0369c-2.8775.1121-5.0909 2.5769-4.9434 5.4899.1107 2.6889 2.2873 4.8923 4.9803 4.967z\'/%3E%3Cpath d=\'m33.2966 28.8178c.8854.6349 1.9183.971 2.9882.971.2951 0 .5902-.0373.8854-.0747 2.8037-.4854 4.722-3.2117 4.2425-6.05-.4796-2.8383-3.1727-4.7802-5.9764-4.2947-1.365.224-2.5455 1.0083-3.3571 2.1287-1.6601 2.3528-1.1068 5.6392 1.2174 7.3197z\'/%3E%3Cpath d=\'m62.7334 19.4403c.7009.3735 1.4756.5602 2.2873.5602.5533 0 1.1067-.112 1.6232-.2988 2.7299-.8963 4.1687-3.8839 3.2833-6.6102-.8854-2.7636-3.8367-4.22008-6.5298-3.32378-2.7299.89628-4.1687 3.88398-3.2833 6.61018v.0374c.4427 1.3071 1.4019 2.3901 2.6193 3.025z\'/%3E%3Cpath d=\'m91.9153 29.3014c.5165.1493 1.033.224 1.5495.224 2.8775 0 5.1648-2.3528 5.2017-5.2284 0-2.913-2.3242-5.2284-5.1648-5.2658-2.8776 0-5.1648 2.3528-5.2017 5.2285-.0369 2.3154 1.4388 4.3694 3.6153 5.0417z\'/%3E%3Cpath d=\'m110.584 54.1341c.258.0373.516.0747.775.0747 2.877 0 5.164-2.3528 5.164-5.2284 0-2.913-2.324-5.2284-5.164-5.2284-2.878 0-5.165 2.3527-5.165 5.2284 0 2.5395 1.881 4.7429 4.39 5.1537z\'/%3E%3Cpath d=\'m111.431 85.0958c2.878-.1121 5.091-2.5769 4.943-5.4899-.11-2.7262-2.287-4.9296-5.017-5.0043h-.074c-2.877.112-5.091 2.5768-4.943 5.4898.111 2.7263 2.287 4.9297 5.017 5.0044z\'/%3E%3Cpath d=\'m96.4542 100.41c-2.3242-1.6807-5.5706-1.1205-7.2307 1.232-1.6601 2.353-1.1068 5.639 1.2174 7.32 2.3241 1.681 5.5706 1.12 7.2307-1.232 1.6601-2.39 1.1067-5.677-1.2174-7.32z\'/%3E%3Cpath d=\'m63.5095 109.035c-2.7299.934-4.2056 3.959-3.2464 6.723.7009 2.128 2.6931 3.547 4.9065 3.585.5534 0 1.1068-.112 1.6601-.262 2.6931-1.083 4.0212-4.145 2.9513-6.871-.996-2.54-3.6891-3.884-6.3084-3.137z\'/%3E%3Cpath d=\'m41.3006 102.46c-.6271-1.232-1.7339-2.166-3.0251-2.5768-2.7299-.8589-5.6443.6718-6.4928 3.4358s.664 5.714 3.394 6.573c.4796.149 1.0329.224 1.5494.224 2.2504 0 4.2794-1.494 4.9434-3.697.4058-1.27.2583-2.726-.3689-3.959z\'/%3E%3Cpath d=\'m19.7189 74.7486c-2.7668-.4854-5.423 1.3818-5.9394 4.1828-.4796 2.8009 1.3649 5.4898 4.1318 6.0127.1106 0 .1844.0373.2951.0373.2582.0374.5165.0374.7378.0747 1.1068 0 2.1766-.3735 3.0251-1.0457 2.2504-1.7179 2.7299-4.967 1.033-7.2451-.7379-1.083-1.9553-1.8299-3.2834-2.0167z\'/%3E%3Cpath d=\'m18.9065 43.6758h-.0738c-2.8775.112-5.091 2.5768-4.9434 5.4898.1107 2.7263 2.2872 4.9297 5.0172 5.0044h.0738c2.8775-.1121 5.091-2.5769 4.9434-5.4899-.1476-2.7262-2.3241-4.8923-5.0172-5.0043z\'/%3E%3Cpath d=\'m49.601 25.4901c-1.6601 2.3528-1.0698 5.6392 1.2543 7.3197 2.3241 1.6806 5.5706 1.0831 7.2307-1.2697s1.0698-5.6392-1.2543-7.3198c-1.1068-.7843-2.5086-1.1204-3.8367-.8963-1.4019.2614-2.6193 1.0083-3.394 2.1661z\'/%3E%3Cpath d=\'m71.2566 30.0466c.7379 2.2034 2.7669 3.6972 5.091 3.6972.5903 0 1.1437-.112 1.697-.2988 2.8038-.9336 4.3163-3.996 3.394-6.8343-1.1436-2.7636-4.2794-4.108-7.0093-2.9503-2.5086 1.0457-3.8367 3.772-3.1727 6.3862z\'/%3E%3Cpath d=\'m99.5521 44.0186c.8489-2.7636-.6641-5.7139-3.394-6.5729-2.73-.8589-5.6444.6723-6.4929 3.4359-.8484 2.7635.6641 5.7139 3.394 6.5728.5165.1494 1.033.2614 1.5495.2614 2.2503-.0373 4.2424-1.5311 4.9434-3.6972z\'/%3E%3Cpath d=\'m98.8491 60.2993c-2.2873 1.7179-2.7669 4.967-1.0699 7.2451.8117 1.1204 2.0291 1.83 3.3938 2.0541.258.0373.517.0747.775.0747 1.107 0 2.177-.3735 3.025-1.0084 2.324-1.6432 2.914-4.8549 1.291-7.2077s-4.796-2.9504-7.1198-1.3071c-.1107 0-.1844.0746-.2951.1493z\'/%3E%3Cpath d=\'m90.9561 82.8168c-2.0659 2.1287-2.029 5.5646.0738 7.6559.996 1.0084 2.361 1.5312 3.726 1.5312h.0738c2.9513-.2241 5.1647-2.8009 4.9434-5.7886-.1845-2.6889-2.3242-4.8176-4.9803-5.0044h-.0738c-1.4019 0-2.7668.5976-3.7629 1.6059z\'/%3E%3Cpath d=\'m80.59 103.394c1.6601-2.353 1.1068-5.6395-1.2174-7.3201-2.3241-1.6806-5.5706-1.1204-7.2307 1.2324s-1.1067 5.6397 1.2543 7.3197c.8854.635 1.9184.971 2.9882.971.2952 0 .5903-.037.8854-.075 1.3281-.224 2.5455-.971 3.3202-2.128z\'/%3E%3Cpath d=\'m58.7517 98.5022c-.9223-2.7636-3.8367-4.2201-6.5666-3.2864-2.73.9336-4.1687 3.884-3.2464 6.6472.7009 2.129 2.693 3.586 4.9065 3.586.5534 0 1.1067-.075 1.6232-.262 2.6931-.971 4.1687-3.921 3.2833-6.6848z\'/%3E%3Cpath d=\'m37.1682 81.5446c-1.2912-.4109-2.7299-.2988-3.9473.3734-2.5455 1.3445-3.5047 4.5189-2.1766 7.0957.6271 1.2324 1.7339 2.1287 3.0251 2.5769.5164.1494 1.0329.2241 1.5494.2241 2.8406 0 5.1648-2.3155 5.2017-5.1911 0-2.3528-1.4757-4.3695-3.6523-5.079z\'/%3E%3Cpath d=\'m33.5524 65.154c.4058-2.8756-1.5494-5.5271-4.39-5.9379-2.8406-.4109-5.4599 1.5685-5.8657 4.4441-.1845 1.3818.1476 2.7636.9592 3.884 1.697 2.3154 4.9434 2.8009 7.2306 1.083 1.1437-.8216 1.8815-2.0914 2.0659-3.4732z\'/%3E%3Cpath d=\'m35.7285 36.8438h-.0737c-2.8776 0-5.1648 2.3901-5.1648 5.2657s2.361 5.2284 5.2016 5.2284h.0738c2.8407-.112 5.0541-2.5768 4.9434-5.4525-.0737-2.7636-2.2503-4.9296-4.9803-5.0416z\'/%3E%3C/g%3E%3Cpath d=\'m181.378 64.1812c0-14.9383 11.251-26.3288 25.971-26.3288 9.186-.0747 17.745 4.7429 22.504 12.735l-8.596 5.4898c-2.582-5.3405-7.968-8.6642-13.834-8.5149-9.297 0-16.122 7.3572-16.122 16.6189 0 9.0377 6.752 16.5443 15.974 16.5443 6.235.112 11.953-3.6226 14.388-9.4859l8.964 4.855c-4.353 8.9256-13.391 14.5275-23.241 14.4155-15.31-.0374-26.008-11.8013-26.008-26.3289z\' fill=\'%23000\'/%3E%3Cpath d=\'m248.742 38.5605v51.2012h33.239v-9.5979h-23.389v-41.6033z\' fill=\'%23000\'/%3E%3Cpath d=\'m301.241 38.5605v51.2012h34.087v-9.3738h-24.274v-11.6519h19.773v-9.3365h-19.773v-11.5025h24.274v-9.3365z\' fill=\'%23000\'/%3E%3Cpath d=\'m372.478 38.5605-19.147 51.2386h10.072l3.32-9.3365h21.175l3.321 9.3365h10.071l-19.147-51.2386zm4.87 12.5482 7.304 20.3909h-14.646z\' fill=\'%23000\'/%3E%3Cpath d=\'m429.398 47.6729v16.9177h9.997c6.456 0 9.444-4.0707 9.444-8.6269 0-5.0043-3.209-8.2908-9.444-8.2908zm-9.813-9.1124h20.548c11.658 0 18.593 7.5813 18.593 17.3285.148 6.3488-3.32 12.2121-8.89 15.1624l9.997 18.7477h-10.957l-8.116-16.1335h-11.362v16.1335h-9.776v-51.2386z\' fill=\'%23000\'/%3E%3Cpath d=\'m465.516 43.305c0-2.5769 2.029-4.6683 4.575-4.6683 2.545 0 4.611 2.054 4.611 4.6309s-2.029 4.6682-4.537 4.6682c-2.472.0747-4.538-1.9046-4.649-4.4068 0-.0747 0-.1494 0-.224zm8.264 0c-.074-2.0167-1.734-3.6226-3.726-3.5479s-3.578 1.7552-3.505 3.7719c.074 1.9794 1.66 3.5479 3.616 3.5479 1.992 0 3.578-1.6432 3.578-3.6599 0-.0374 0-.0747 0-.112zm-2.619.4108 1.143 1.9793h-1.07l-1.069-1.8673h-.738v1.8673h-.922v-4.855h1.807c.812 0 1.734.2988 1.734 1.4565.037.6349-.332 1.2324-.922 1.4565zm-.923-2.0541h-.774v1.3818h.811c.591 0 .812-.2987.812-.7095s-.332-.6723-.922-.6723z\' fill=\'%23000\'/%3E%3C/svg%3E" style="height: 1.25rem;display: inline; vertical-align: bottom;"/>\n      </p>\n      <div *ngIf="loadingTefcaRLS" class="flex items-center gap-2 mt-2">\n        <svg class="animate-spin h-5 w-5 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">\n          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>\n          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path>\n        </svg>\n        <span>Finding institutions you\'ve visited for treatment...</span>\n      </div>\n    </div>\n  </div>\n\n  \x3c!-- dynamically populate list of systems --\x3e\n  <div class="space-y-3" id="connecting-systems-list">\n    \x3c!-- connected accounts --\x3e\n    <div *ngFor="let connectedAccount of ((configService.vaultProfileConfigSubject | async)?.connectedPatientAccounts || [])" class="flex items-center p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all">\n      <button class="connect-btn w-8 h-8 rounded-full border border-[#5B47FB] bg-[#5B47FB] transition-all hover:bg-[#4936E8] hover:border-[#4936E8] animate-scale">\n        <svg class="w-4 h-4 mx-auto text-white animate-scale" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            d="M5 13l4 4L19 7"\n          />\n        </svg>\n      </button>\n      <img imageFallback src="https://cdn.fastenhealth.com/logos/sources/{{connectedAccount.brand?.id}}.png" alt="{{connectedAccount.brand?.name}}" class="w-8 max-h-8 mx-4 rounded">\n      <div class="flex-1 min-w-0"><p class="font-semibold">{{connectedAccount.portal?.name}}</p>\n        <p class="text-sm text-gray-600">Connected</p></div>\n    </div>\n\n    \x3c!-- discovered accounts --\x3e\n    <div *ngFor="let discoveredAccount of (((configService.vaultProfileConfigSubject | async)?.discoveredPatientAccounts || {}) | keyvalue)" class="flex items-center p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all">\n      <button class="connect-btn w-8 h-8 rounded-full border border-gray-300 transition-all hover:bg-gray-50 hover:border-[#5B47FB]/30"\n        (click)="connectTefcaDirectAccount(discoveredAccount.key, discoveredAccount.value)">\n        <svg class="w-4 h-4 mx-auto text-white animate-scale" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n          <path\n            stroke-linecap="round"\n            stroke-linejoin="round"\n            stroke-width="2"\n            d="M5 13l4 4L19 7"\n          />\n        </svg>\n      </button>\n      <img imageFallback src="https://cdn.fastenhealth.com/logos/sources/{{discoveredAccount.value.brand?.id}}.png" alt="{{discoveredAccount.value.brand?.name}}" class="w-8 max-h-8 mx-4 rounded">\n      <div class="flex-1 min-w-0"><p class="font-semibold">{{discoveredAccount.value.portal?.name}}</p>\n        <p class="text-sm text-gray-600">Ready to connect</p></div>\n    </div>\n\n    \x3c!-- pending accounts --\x3e\n    <div *ngFor="let pendingAccount of (((configService.vaultProfileConfigSubject | async)?.pendingPatientAccounts || {}) | keyvalue)"\n         class="flex items-center p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all">\n      <div class="w-8 h-8 flex items-center justify-center animate-bounce">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-amber-500">\n          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>\n          <line x1="12" y1="9" x2="12" y2="13"></line>\n          <line x1="12" y1="17" x2="12.01" y2="17"></line>\n        </svg>\n      </div>\n      <img imageFallback src="https://cdn.fastenhealth.com/logos/sources/{{pendingAccount.value.brand?.id}}.png" alt="{{pendingAccount.value.brand?.name}}" class="w-8 max-h-8 mx-3 rounded">\n      <div class="flex-1 min-w-0"><p class="font-semibold">{{pendingAccount.value.portal.name}}</p>\n        <p class="text-sm text-gray-600">Sign in required</p>\n      </div>\n      <a\n        (click)="connectAccount(pendingAccount.key, pendingAccount.value)"\n        class="cursor-pointer border border-[#5B47FB] text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white px-4 py-1.5 rounded-lg text-sm font-medium transition-colors">\n        Sign in\n      </a>\n    </div>\n  </div>\n\n  \x3c!-- Search button to connect new system --\x3e\n  <button id="search-button"\n          [routerLink]="\'/search\'"\n          class="w-full border bg-gray-50 border-gray-200 rounded-lg flex justify-between items-center px-4 py-3 text-sm font-medium hover:border-[#5B47FB] hover:bg-[#5B47FB]/5 transition-all">\n    <div class="flex items-center gap-2">\n      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor">\n        <path d="M21 21l-5.2-5.2m2.2-5.3a7.5 7.5 0 11-15 0 7.5 7.5 0 0115 0z" stroke-width="2"\n              stroke-linecap="round" stroke-linejoin="round" />\n      </svg>\n      <span>Connect a new health system</span>\n    </div>\n    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n         class="lucide lucide-chevron-right w-5 h-5 text-gray-400">\n      <polyline points="9 6 15 12 9 18" />\n    </svg>\n  </button>\n\n  <div class="flex items-center justify-between pt-4">\n    <div class="flex items-center gap-2 text-sm text-gray-600">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock w-4 h-4"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>\n      <span>Your medical records are secure</span>\n    </div>\n    <button [disabled]="!((configService.vaultProfileConfigSubject | async)?.connectedPatientAccounts || []).length"\n            (click)="completeAccounts()"\n            id="connecting-continue"\n            class="bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md disabled:opacity-50">\n      Continue\n    </button>\n  </div>\n\n  <p class="text-xs text-gray-400 text-center">\n    By clicking continue you agree to:\n    <br/>Fasten\'s <a href="https://policy.fastenhealth.com/connect/privacy_policy.html" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Privacy Policy</a> and\n    <a href="https://policy.fastenhealth.com/terms.html" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Terms & Conditions</a>\n    <br/>{{(configService.systemConfigSubject | async)?.org?.name || \'Unknown\'}}\'s\n    <a href="{{(configService.systemConfigSubject | async)?.org?.privacy_policy_uri}}" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Privacy Policy</a>\n  </p>\n</div>\n',standalone:!0,imports:[common.MD,router.iI,public_api.$$,header_component.l],styles:[dashboard_componentngResource_default()]})],DashboardComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/form-health-system-request/form-health-system-request.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/form-health-system-request/form-health-system-request.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>FormHealthSystemRequestComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var form_health_system_request_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/form-health-system-request/form-health-system-request.component.css?ngResource"),form_health_system_request_componentngResource_default=__webpack_require__.n(form_health_system_request_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),spinner_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.ts");let FormHealthSystemRequestComponent=class FormHealthSystemRequestComponent{constructor(router,configService,vaultApi){this.router=router,this.configService=configService,this.vaultApi=vaultApi,this.formRequestHealthSystem={},this.loading=!1,this.submitSuccess=!1,this.errorMsg=""}ngOnInit(){this.resetForm()}resetForm(){this.submitSuccess=!1;let requestForm=new public_api.Xt;requestForm.email="",requestForm.name=this.configService.searchConfig$.searchFilter?.query||"",requestForm.street_address="",requestForm.website="",this.formRequestHealthSystem=requestForm}submitForm(){this.loading=!0,this.vaultApi.requestHealthSystem(this.formRequestHealthSystem).subscribe((resp=>{this.loading=!1,this.submitSuccess=!0}),(err=>{this.loading=!1,console.error("an error occurred during request submission",err),this.errorMsg=err||"An error occurred while submitting your request. Please try again later."}))}dismiss(){this.router.navigateByUrl("dashboard")}static{this.ctorParameters=()=>[{type:router.Ix},{type:public_api.we},{type:fasten_service.B}]}};FormHealthSystemRequestComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-form-health-system-request",template:'\x3c!-- Step: REQUEST FORM --\x3e\n<div id="step-request-form" class="space-y-6">\n  <app-header [backButtonLink]="\'/dashboard\'" ></app-header>\n\n  <form id="request-form" class="space-y-6" *ngIf="!submitSuccess; else requestSuccess" (ngSubmit)="submitForm()" #healthSystemRequestForm="ngForm">\n    <div id="request-form-header" class="space-y-2">\n      <h2 class="text-xl font-bold">Request your Health System</h2>\n      <p class="text-base text-gray-600">\n        Sharing your email address and related information helps us prioritize your Health System.\n      </p>\n    </div>\n\n    <div class="space-y-4">\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Your email address\n          <span class="text-red-500">*</span></label>\n        <input id="request-email" type="email" placeholder="you@example.com" required email\n               [(ngModel)]="formRequestHealthSystem.email" name="email" #email="ngModel"\n               class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n        <p *ngIf="email.invalid && (email.dirty || email.touched)" class="mt-2 text-sm text-red-600 dark:text-red-500">\n          <span *ngIf="email.errors?.[\'required\']">\n            Email is required.\n          </span>\n            <span *ngIf="email.errors?.[\'email\']">\n            Email must be valid.\n          </span>\n        </p>\n      </div>\n\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Health system name\n          <span class="text-red-500">*</span></label>\n        <input id="request-healthsystem" type="text"\n               placeholder="Mayo Clinic, Cleveland Clinic, Kaiser Permanente"\n               [(ngModel)]="formRequestHealthSystem.name" name="name" #name="ngModel" required minlength="4"\n               class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n        <p *ngIf="name.invalid && (name.dirty || name.touched)" class="mt-2 text-sm text-red-600 dark:text-red-500">\n        <span *ngIf="name.errors?.[\'required\']">\n          Health system name is required.\n        </span>\n          <span *ngIf="name.errors?.[\'minlength\']">\n          Health system name must be at least 4 characters long.\n        </span>\n        </p>\n      </div>\n\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Website <span\n          class="text-red-500">*</span></label>\n        <input id="request-website" type="text" placeholder="www.mayoclinic.org"\n               [(ngModel)]="formRequestHealthSystem.website" name="website" #website="ngModel" required minlength="4"\n               class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n        <p *ngIf="website.invalid && (website.dirty || website.touched)" class="mt-2 text-sm text-red-600 dark:text-red-500">\n        <span *ngIf="website.errors?.[\'required\']">\n          Website is required.\n        </span>\n          <span *ngIf="website.errors?.[\'minlength\']">\n          Website must be at least 4 characters long.\n        </span>\n        </p>\n      </div>\n    </div>\n\n    <div class="space-y-2">\n      <label class="block text-sm font-medium text-gray-700 tracking-tight">Street Address</label>\n      <input id="request-address" type="text" placeholder="123 Broadway, New York, NY"\n             [(ngModel)]="formRequestHealthSystem.street_address" name="street_address" #street_address="ngModel"\n             class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n    </div>\n\n    <p *ngIf="errorMsg" class="mt-2 text-sm text-red-600 dark:text-red-500">\n      <strong>Error</strong> {{errorMsg}}\n    </p>\n\n    <button type="submit"\n      [disabled]="!healthSystemRequestForm.form.valid || loading"\n      class="w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium flex justify-center items-center">\n      <app-spinner *ngIf="loading"></app-spinner>\n      Submit\n    </button>\n  </form>\n</div>\n\x3c!-- End Step: REQUEST FORM --\x3e\n\n<ng-template #requestSuccess>\n\n  \x3c!-- Success animation container --\x3e\n  <div id="request-success-animation" class=" text-center py-16">\n    <div class="w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle">\n      <svg class="w-8 h-8 text-[#5B47FB]" fill="none" stroke="currentColor" stroke-width="2.5"\n           viewBox="0 0 24 24">\n        <path class="success-check" stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />\n      </svg>\n    </div>\n    <div class="flex items-center justify-center">\n\n      <div>\n        <div class="text-base text-gray-600 py-5">\n          Thanks for providing information about your Health System. Your request has been recorded and we will notify you once your Health System is supported.\n        </div>\n        <button (click)="dismiss()" type="button" class="py-2 w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium" >\n          Dismiss\n        </button>\n      </div>\n\n    </div>\n  </div>\n\n</ng-template>\n',standalone:!0,imports:[common.MD,fesm2022_forms.X1,fesm2022_forms.YN,header_component.l,spinner_component.t],styles:[form_health_system_request_componentngResource_default()]})],FormHealthSystemRequestComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/form-support-request/form-support-request.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/form-support-request/form-support-request.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>FormSupportRequestComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var form_support_request_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/form-support-request/form-support-request.component.css?ngResource"),form_support_request_componentngResource_default=__webpack_require__.n(form_support_request_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),spinner_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.ts");let FormSupportRequestComponent=class FormSupportRequestComponent{constructor(router,vaultApi){this.router=router,this.vaultApi=vaultApi,this.formSupportRequest={},this.loading=!1,this.submitSuccess=!1,this.errorMsg=""}ngOnInit(){this.resetForm()}resetForm(){this.submitSuccess=!1;let requestForm=new public_api.T;requestForm.email="",requestForm.healthsystem_name="",requestForm.request_content="",this.formSupportRequest=requestForm}submitForm(){this.loading=!0,this.formSupportRequest.error=this.error,this.formSupportRequest.error_description=this.error_description,this.formSupportRequest.brand_id=this.brand_id,this.formSupportRequest.portal_id=this.portal_id,this.formSupportRequest.endpoint_id=this.endpoint_id,this.formSupportRequest.org_connection_id=this.org_connection_id,this.formSupportRequest.external_id=this.external_id,this.formSupportRequest.external_state=this.external_state,this.formSupportRequest.request_id=this.request_id,this.vaultApi.requestSupport(this.formSupportRequest).subscribe((resp=>{this.loading=!1,this.submitSuccess=!0}),(err=>{this.loading=!1,console.error("an error occurred during issue submission",err),this.errorMsg=err||"An error occurred while submitting your issue. Please try again later."}))}dismiss(){this.router.navigateByUrl("dashboard")}static{this.ctorParameters=()=>[{type:router.Ix},{type:fasten_service.B}]}static{this.propDecorators={error:[{type:core.Input}],error_description:[{type:core.Input}],brand_id:[{type:core.Input}],portal_id:[{type:core.Input}],endpoint_id:[{type:core.Input}],org_connection_id:[{type:core.Input}],external_id:[{type:core.Input}],external_state:[{type:core.Input}],request_id:[{type:core.Input}]}}};FormSupportRequestComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-form-support-request",template:'\x3c!-- Step: SUPPORT REQUEST FORM --\x3e\n<div id="step-request-form" class="space-y-6">\n  <app-header [backButtonLink]="\'/dashboard\'" ></app-header>\n\n  <form id="request-form" class="space-y-6" *ngIf="!submitSuccess; else requestSuccess" (ngSubmit)="submitForm()" #supportRequestForm="ngForm">\n    <div id="request-form-header" class="space-y-2">\n      <h2 class="text-xl font-bold">Report an issue</h2>\n      <p class="text-base text-gray-600">\n        Sharing your email address and related information helps us prioritize your issue.\n      </p>\n    </div>\n\n    <div class="space-y-4">\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Your email address\n          <span class="text-red-500">*</span></label>\n        <input [(ngModel)]="formSupportRequest.email" type="email" placeholder="you@example.com" required\n               class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n      </div>\n\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Health system name\n          <span class="text-red-500">*</span></label>\n        <input [(ngModel)]="formSupportRequest.healthsystem_name" type="text"\n               placeholder="Mayo Clinic, Cleveland Clinic, Kaiser Permanente" required\n               class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" />\n      </div>\n\n      <div class="space-y-2">\n        <label class="block text-sm font-medium text-gray-700 tracking-tight">Describe your issue<span\n          class="text-red-500">*</span></label>\n        <textarea [(ngModel)]="formSupportRequest.request_content" placeholder="please provide as much data as possible, it helps us prioritize your issue" required\n                  class="block w-full mt-1 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20 tracking-tight" ></textarea>\n      </div>\n    </div>\n\n    <button type="submit"\n      [disabled]="!supportRequestForm.form.valid || loading"\n      class="w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium flex justify-center items-center">\n      <app-spinner *ngIf="loading"></app-spinner>\n      Submit\n    </button>\n  </form>\n</div>\n\x3c!-- End Step: REQUEST FORM --\x3e\n\n<ng-template #requestSuccess>\n\n  \x3c!-- Success animation container --\x3e\n  <div id="request-success-animation" class=" text-center py-16">\n    <div class="w-16 h-16 mx-auto bg-[#5B47FB]/10 rounded-full flex items-center justify-center success-circle">\n      <svg class="w-8 h-8 text-[#5B47FB]" fill="none" stroke="currentColor" stroke-width="2.5"\n           viewBox="0 0 24 24">\n        <path class="success-check" stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />\n      </svg>\n    </div>\n    <div class="flex items-center justify-center">\n\n      <div>\n        <div class="text-base text-gray-600 py-5">\n          Thanks for providing information about your issue. Your request has been recorded and we will notify you once we have an update.\n        </div>\n        <button (click)="dismiss()" type="button" class="py-2 w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white py-2 px-4 rounded-md tracking-tight font-medium" >\n          Dismiss\n        </button>\n      </div>\n\n    </div>\n  </div>\n\n</ng-template>\n',standalone:!0,imports:[common.MD,fesm2022_forms.X1,fesm2022_forms.YN,header_component.l,spinner_component.t],styles:[form_support_request_componentngResource_default()]})],FormSupportRequestComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-brand-details/health-system-brand-details.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-brand-details/health-system-brand-details.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>HealthSystemBrandDetailsComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var health_system_brand_details_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-brand-details/health-system-brand-details.component.css?ngResource"),health_system_brand_details_componentngResource_default=__webpack_require__.n(health_system_brand_details_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts");let HealthSystemBrandDetailsComponent=class HealthSystemBrandDetailsComponent{constructor(configService,router,logger){this.configService=configService,this.router=router,this.logger=logger}ngOnInit(){}addPendingAccount(brand,portal,endpoint){this.logger.debug("addPendingAccount",brand,portal,endpoint),this.configService.vaultProfileAddPendingAccount(brand,portal,endpoint),this.router.navigateByUrl("dashboard")}static{this.ctorParameters=()=>[{type:public_api.we},{type:router.Ix},{type:ngx_logger.so}]}};HealthSystemBrandDetailsComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-health-system-brand-details",template:'\x3c!-- Step: HEALTH SYSTEM DETAILS --\x3e\n<div id="step-health-system-details" class="space-y-6">\n  <app-header [backButtonLink]="\'/search\'" ></app-header>\n\n  <div class="space-y-6">\n    \x3c!-- Health System Brand Card --\x3e\n    <div class="border rounded-2xl p-6">\n      <div class="flex items-start space-x-4 mb-4">\n        <div class="flex-shrink-0">\n          <img class="w-12 max-h-12 rounded-lg object-contain" imageFallback src="https://cdn.fastenhealth.com/logos/sources/{{(configService.searchConfigSubject | async)?.selectedBrand?.id}}.png">\n        </div>\n        <div class="flex-1 min-w-0">\n          <h2 id="hsd-name" class="text-xl font-semibold">{{(configService.searchConfigSubject | async)?.selectedBrand?.name}}</h2>\n        </div>\n      </div>\n\n      <p id="hsd-description" class="text-gray-600 text-base mb-4"></p>\n\n      <div class="space-y-2">\n        <div *ngIf="(configService.searchConfigSubject | async)?.selectedBrand?.brand_website" class="flex items-center gap-2 text-gray-600" id="hsd-website-container">\n          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n               class="lucide lucide-globe w-5 h-5">\n            <circle cx="12" cy="12" r="10" />\n            <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" />\n            <path d="M2 12h20" />\n          </svg>\n          <a id="hsd-website" class="text-base hover:underline" [href]="(configService.searchConfigSubject | async)?.selectedBrand?.brand_website" target="_blank" rel="noopener noreferrer">{{(configService.searchConfigSubject | async)?.selectedBrand?.brand_website}}</a>\n        </div>\n        <div *ngIf="(configService.searchConfigSubject | async)?.selectedBrand?.locations" class="flex items-center gap-2 text-gray-600">\n          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n               stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n               class="lucide lucide-map-pin w-5 h-5">\n            <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0" />\n            <circle cx="12" cy="10" r="3" />\n          </svg>\n          <span id="hsd-location" class="text-base">\n            <span *ngFor="let stateCode of ((configService.searchConfigSubject | async)?.selectedBrand?.locations || []) | slice:0:3;">{{stateCode | stateName}}</span>\n            <span *ngIf="((configService.searchConfigSubject | async)?.selectedBrand?.locations || []).length > 4">+ {{((configService.searchConfigSubject | async)?.selectedBrand?.locations || []).length}}</span>\n          </span>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Institutions List --\x3e\n    <div class="space-y-2" id="hsd-institutions-list">\n      <ng-container *ngFor="let portal of (configService.searchConfigSubject | async)?.selectedBrand?.portals">\n        <div *ngFor="let endpoint of portal.endpoints" class="p-4 pt-6 pb-6 border rounded-lg hover:border-gray-400 transition-colors relative">\n\n          <div id="platform-tag" class="absolute top-0 left-0 bg-gray-200 text-gray-600 text-xs font-medium px-2 py-1 rounded-tl-lg rounded-br-lg">\n          \x3c!-- Element content here --\x3e\n            <span class="text-xs text-gray-500">{{endpoint.platform_type}}</span>\n          </div>\n\n          <div class="flex items-center justify-between">\n            <h4 class="font-medium text-base tracking-tight">{{portal.name}}</h4>\n            <button (click)="addPendingAccount(configService.searchConfig$?.selectedBrand!, portal, endpoint)" type="button" class="border border-[#5B47FB] text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white w-8 h-8 rounded-lg text-lg font-medium transition-colors flex items-center justify-center">+</button>\n          </div>\n\n          <p *ngIf="portal.description" class="text-xs text-gray-500 mt-2">{{portal.description}}</p>\n\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</div>\n\x3c!-- End Step: HEALTH SYSTEM DETAILS --\x3e\n',standalone:!0,imports:[common.MD,header_component.l,public_api.$$,public_api.vz],styles:[health_system_brand_details_componentngResource_default()]})],HealthSystemBrandDetailsComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-connecting/health-system-connecting.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-connecting/health-system-connecting.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>HealthSystemConnectingComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var health_system_connecting_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-connecting/health-system-connecting.component.css?ngResource"),health_system_connecting_componentngResource_default=__webpack_require__.n(health_system_connecting_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),connect_helper=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/utils/connect-helper.ts"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts");let HealthSystemConnectingComponent=class HealthSystemConnectingComponent{constructor(configService,router,messageBus,injector){this.configService=configService,this.router=router,this.messageBus=messageBus,this.injector=injector,this.brandId="",this.portalId="",this.endpointId="",this.externalId="",this.externalState="",this.orgConnectionId="",this.vaultProfileConnectionId="",this.sdkMode=public_api.eu.None}ngOnInit(){this.injector.runInContext((()=>{(0,connect_helper.p)({public_id:this.configService.systemConfig$.publicId,brand_id:this.brandId,portal_id:this.portalId,endpoint_id:this.endpointId,org_connection_id:this.orgConnectionId,external_id:this.externalId,external_state:this.externalState,vault_profile_connection_id:this.vaultProfileConnectionId})}))}cancelAccountConnect(){console.log("cancel account connect")}closeModal(){this.messageBus.publishRequestClose()}static{this.ctorParameters=()=>[{type:public_api.we},{type:router.Ix},{type:public_api.BG},{type:core.EnvironmentInjector}]}static{this.propDecorators={brandId:[{type:core.Input}],portalId:[{type:core.Input}],endpointId:[{type:core.Input}],externalId:[{type:core.Input}],externalState:[{type:core.Input}],orgConnectionId:[{type:core.Input}],vaultProfileConnectionId:[{type:core.Input}],sdkMode:[{type:core.Input}]}}};HealthSystemConnectingComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-health-system-connecting",template:'\x3c!-- Step: CONNECTING --\x3e\n<div class="space-y-6">\n  <app-header\n    [backButtonLink]="orgConnectionId ? \'\' : \'/dashboard\'" (backButtonEvent)="cancelAccountConnect()"\n    [showClose]="orgConnectionId ? true : false" (closeButtonEvent)="closeModal()"\n\n  ></app-header>\n\n  <div class="flex items-center justify-center gap-4">\n    \x3c!-- Fasten Logo --\x3e\n    <div class="relative w-16 h-16 bg-white rounded-2xl shadow-md p-3 animate-pulse-flow animate-delay-100">\n      <img imageFallback="unknown-organization" [src]="(configService.systemConfigSubject | async)?.org?.logo_uri" alt="Organization Logo"class="w-full h-full object-contain"/>\n    </div>\n\n    \x3c!-- Connection Animation --\x3e\n    <div class="flex space-x-1">\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-100"></div>\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-200"></div>\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-300"></div>\n    </div>\n\n    \x3c!-- Health System Logo --\x3e\n    <div class="relative w-16 h-16 bg-white rounded-2xl shadow-md p-3 animate-pulse-flow animate-delay-300">\n      <div id="connecting-system-logo-container" class="w-full h-full flex items-center justify-center">\n        <img id="connecting-system-logo"\n             class="w-full h-full object-contain"\n             imageFallback="hospital" src="https://cdn.fastenhealth.com/logos/sources/{{brandId}}.png" />\n      </div>\n    </div>\n  </div>\n\n  <div class="text-center space-y-2">\n    <h2 id="connecting-title" class="text-xl font-semibold text-gray-900"></h2>\n    <p id="connecting-subtitle" class="text-sm text-gray-600">Redirecting to sign in...</p>\n  </div>\n\n  \x3c!-- Support Panel --\x3e\n  <div class="mt-8 p-4 bg-gray-50 rounded-lg space-y-4">\n    <div class="flex items-center gap-2 text-gray-700">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">\n        <circle cx="12" cy="12" r="10"/>\n        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>\n        <path d="M12 17h.01"/>\n      </svg>\n      <span class="font-medium">Having trouble?</span>\n    </div>\n    <p class="text-sm text-gray-600">\n      If you\'re experiencing issues connecting to your health system, our support team is here to help.\n    </p>\n    <button [routerLink]="\'/form/support\'" [queryParams]="{brand_id: brandId, portal_id: portalId, endpoint_id: endpointId, org_connection_id: orgConnectionId, external_id: externalId, external_state: externalState }" class="w-full bg-white border border-gray-200 text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white hover:border-[#5B47FB] font-medium py-2 px-4 rounded-md transition-colors">\n      Contact Support\n    </button>\n  </div>\n</div>\n\x3c!-- End Step: CONNECTING --\x3e\n',standalone:!0,imports:[common.MD,router.iI,header_component.l,public_api.$$],styles:[health_system_connecting_componentngResource_default()]})],HealthSystemConnectingComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-search/health-system-search.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.comma:not(:last-child):after {\n  content: ", ";\n}\n',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/health-system-search/health-system-search.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>HealthSystemSearchComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var health_system_search_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/health-system-search/health-system-search.component.css?ngResource"),health_system_search_componentngResource_default=__webpack_require__.n(health_system_search_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),distinctUntilChanged=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js"),debounceTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs");const StateCodes={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY","American Samoa":"AS","District of Columbia":"DC","Federated States of Micronesia":"FM",Guam:"GU","Marshall Islands":"MH","Northern Mariana Islands":"MP",Palau:"PW","Puerto Rico":"PR","Virgin Islands":"VI","Armed Forces Americas":"AA","Armed Forces Europe":"AE","Armed Forces Pacific":"AP"};var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),ngx_infinite_scroll=__webpack_require__("./node_modules/ngx-infinite-scroll/fesm2022/ngx-infinite-scroll.mjs");let HealthSystemSearchComponent=class HealthSystemSearchComponent{set searchQuery(newQuery){this.filter.query=newQuery}constructor(fastenService,configService,router,logger,messageBus){this.fastenService=fastenService,this.configService=configService,this.router=router,this.logger=logger,this.messageBus=messageBus,this.loading=!1,this.lighthouseBrandList=[],this.stateCodes=StateCodes,this.showFilters=!1,this.filter=new public_api.$6,this.resultLimits={totalItems:0,scrollComplete:!1,platformTypesBuckets:void 0,categoryBuckets:void 0},this.searchTermChanged=new Subject.B}ngOnInit(){this.querySources(!0),this.searchTermSubscription=this.searchTermChanged.pipe((0,distinctUntilChanged.F)(),(0,debounceTime.B)(500)).subscribe((()=>{this.logger.info("searchTermChanged",this.filter.query),this.querySources(!0)}))}ngOnDestroy(){this.searchTermSubscription&&this.searchTermSubscription.unsubscribe()}onKeyup(event){this.searchTermChanged.next(this.filter.query)}querySources(reset){if(reset&&this.resetSearch(),this.logger.debug("querySources()",this.filter),this.loading)return this.logger.info("already loading, ignoring querySources()"),(0,of.of)(null);this.filter||(this.filter=new public_api.$6,this.logger.info("querySources() - no filter provided, using current form value",this.filter)),this.filter.fields=["*"],this.loading=!0;var searchObservable=this.fastenService.searchCatalog(this.configService.systemConfig$.apiMode,this.filter);return searchObservable.subscribe((wrapper=>{this.logger.info("search sources",wrapper),this.resultLimits.totalItems=wrapper?.hits?.total.value||0,this.lighthouseBrandList=this.lighthouseBrandList.concat((wrapper?.hits?.hits||[]).map((result=>({brand:result._source,searchHighlights:result?.highlight?.aliases||[]})))),wrapper?.hits&&wrapper?.hits?.hits&&0!=wrapper?.hits?.hits?.length&&wrapper?.hits?.total?.value!=wrapper?.hits?.hits?.length?(this.logger.debug("SETTING NEXT SORT KEY:",wrapper.hits.hits[wrapper.hits.hits.length-1].sort.join(",")),this.filter.searchAfter=wrapper.hits.hits[wrapper.hits.hits.length-1].sort.join(",")):(this.logger.debug("SCROLL_COMPLETE!@@@@@@@@"),this.resultLimits.scrollComplete=!0),this.loading=!1,reset&&this.messageBus.publishSearchQuery(this.filter.query,this.filter.locations,this.configService.systemConfig$.externalId,wrapper?.hits?.total?.value)}),(error=>{this.loading=!1,this.logger.error("sources FAILED",error)}),(()=>{this.loading=!1,this.logger.info("sources finished")})),searchObservable}onScroll(){this.resultLimits.scrollComplete||this.querySources(!1)}resetSearch(){this.logger.info("reset search..."),this.lighthouseBrandList=[],this.filter.searchAfter=[],this.resultLimits={totalItems:0,scrollComplete:!1,platformTypesBuckets:void 0,categoryBuckets:void 0}}selectBrand(brandItem){this.configService.searchConfig$.selectedBrand=brandItem,this.router.navigateByUrl("brand/details")}static{this.ctorParameters=()=>[{type:fasten_service.B},{type:public_api.we},{type:router.Ix},{type:ngx_logger.so},{type:public_api.BG}]}static{this.propDecorators={searchQuery:[{type:core.Input}]}}};HealthSystemSearchComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-health-system-search",template:'\x3c!-- Step: SEARCH VIEW --\x3e\n<div id="step-search" class="space-y-6">\n  <app-header [backButtonLink]="\'/dashboard\'" ></app-header>\n\n\n  <div *ngIf="((configService.vaultProfileConfigSubject | async)?.identityVerificationFailureCount || 0) >= 2" class="p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50" role="alert">\n    We were unable to verify your identity. Please search for your healthcare system below.\n    <br/>\n    You can also <a [routerLink]="\'/form/support\'" class="underline">file a ticket</a> if you need help.\n  </div>\n\n  <div class="flex gap-2">\n    <div class="flex-1">\n      <input id="search-input" type="text" placeholder="Search for your health system..."\n             [(ngModel)]="filter.query"\n             (keyup)="onKeyup($event)"\n             class="w-full block px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20" />\n    </div>\n    <button (click)="this.showFilters = !this.showFilters" id="search-filters" class="border border-gray-200 rounded-lg w-10 h-10 flex items-center justify-center hover:border-[#5B47FB] hover:bg-[#5B47FB]/5 transition-all">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n           stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n           class="lucide lucide-filter w-5 h-5">\n        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />\n      </svg>\n    </button>\n  </div>\n\n  \x3c!-- Filter container --\x3e\n  <div *ngIf="showFilters" id="filters-container" class="space-y-4 p-4 border rounded-lg">\n    <h3 class="font-semibold text-lg">Filters</h3>\n\n    \x3c!-- State filter --\x3e\n    <div class="relative">\n      <label class="block text-sm font-medium mb-1">State</label>\n      <select [(ngModel)]="filter.locations[0]" (ngModelChange)="querySources(true)" class="w-full flex items-center justify-between px-3 py-2 text-sm border rounded-md bg-white hover:bg-gray-50">\n        <option value="ALL" selected>All States</option>\n        <option disabled>-------</option>\n        <option *ngFor="let item of stateCodes | keyvalue"  [value]="item.value">{{ item.key }}</option>\n      </select>\n\n      <div id="state-filter-menu" class="absolute z-10 w-full mt-1 rounded-md border bg-white shadow-lg hidden">\n        <div class="py-1">\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between">\n            <span>All States</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB]">\n              <polyline points="20 6 9 17 4 12"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <div id="state-filter-menu-hidden" class="absolute z-10 w-full mt-1 rounded-md border bg-white shadow-lg hidden">\n        <div class="py-1">\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between">\n            <span>All States</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB] hidden">\n              <polyline points="20 6 9 17 4 12"></polyline>\n            </svg>\n          </button>\n\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between">\n            <span>California</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB] hidden">\n              <polyline points="20 6 9 17 4 12"></polyline>\n            </svg>\n          </button>\n\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between">\n            <span>New Jersey</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB] hidden">\n              <polyline points="20 6 9 17 4 12"></polyline>\n            </svg>\n          </button>\n\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between bg-gray-50">\n            <span>New York</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB]">\n              <polyline points="20 6 9 17 4 12"></polyline>\n            </svg>\n          </button>\n\n          <button class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 flex items-center justify-between">\n            <span>Washington</span>\n            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-[#5B47FB] hidden">\n              <polyline points="20 6 9 17 4 12"></polyline>\n            </svg>\n          </button>\n\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n\n  \x3c!-- Search results container --\x3e\n  <div class="space-y-2 overflow-scroll" style="max-height:600px" id="search-results"\n       infiniteScroll\n       [infiniteScrollDistance]="2"\n       [infiniteScrollThrottle]="50"\n       [scrollWindow]="false"\n       (scrolled)="onScroll()"\n  >\n\n    <button *ngFor="let brand of lighthouseBrandList" type="button"\n            (click)="selectBrand(brand.brand)"\n            class="w-full flex items-center gap-3 p-3 border rounded-lg hover:border-[#5B47FB]/30 hover:shadow-sm transition-all text-left focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20">\n      <img imageFallback src="https://cdn.fastenhealth.com/logos/sources/{{brand?.brand?.id}}.png" alt="{{brand?.brand?.name}}" class="w-8 max-h-8 rounded">\n      <div class="flex-1 min-w-0">\n        <p class="font-semibold">{{brand?.brand?.name}}</p>\n        <p *ngIf="(brand?.searchHighlights || []).length > 0" class="text-sm text-gray-600">Found match(es):\n          <span class="comma" *ngFor="let highlight of brand?.searchHighlights" [innerHTML]="highlight | safeHtml"></span>\n        </p>\n        <p class="text-sm text-gray-600">\n          <span class="comma" *ngFor="let stateCode of (brand?.brand?.locations || []) | slice:0:3;">{{stateCode | stateName}}</span>\n          <span class="comma" *ngIf="(brand?.brand?.locations || []).length > 4">+ {{(brand?.brand?.locations || []).length}}</span>\n        </p></div>\n      <div class="flex items-center">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n             class="w-5 h-5 text-gray-400">\n          <polyline points="9 6 15 12 9 18"></polyline>\n        </svg>\n      </div>\n    </button>\n\n  </div>\n  <div *ngIf="loading">\n    <div class="animate-pulse space-y-2 overflow-scroll" style="max-height: 600px;">\n      \x3c!-- Repeating skeleton card items --\x3e\n      <div class="skeleton-card">\n        <div class="skeleton skeleton-circle"></div>\n        <div class="flex-1 space-y-1">\n          <div class="skeleton skeleton-text w-32"></div>\n          <div class="skeleton skeleton-text w-20"></div>\n        </div>\n        <div class="skeleton w-5 h-5 rounded"></div>\n      </div>\n      <div class="skeleton-card">\n        <div class="skeleton skeleton-circle"></div>\n        <div class="flex-1 space-y-1">\n          <div class="skeleton skeleton-text w-32"></div>\n          <div class="skeleton skeleton-text w-20"></div>\n        </div>\n        <div class="skeleton w-5 h-5 rounded"></div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf="!loading && lighthouseBrandList.length == 0" class="space-y-4">\n\n    <div class="mt-8 p-4 bg-gray-50 rounded-lg space-y-4">\n      <div class="flex items-center gap-2 text-gray-700">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5">\n          <circle cx="11" cy="11" r="8"/>\n          <path d="m21 21-4.3-4.3"/>\n        </svg>\n        <span class="font-medium">No results found</span>\n      </div>\n      <p class="text-sm text-gray-600">\n        We couldn\'t find any health systems matching your search\n      </p>\n      <button [routerLink]="\'/form/healthsystem\'"  class="w-full bg-white border border-gray-200 text-[#5B47FB] hover:bg-[#5B47FB] hover:text-white hover:border-[#5B47FB] font-medium py-2 px-4 rounded-md transition-colors">\n        Request this health system\n      </button>\n    </div>\n  </div>\n</div>\n\x3c!-- End Step: SEARCH VIEW --\x3e\n',standalone:!0,imports:[common.MD,router.iI,fesm2022_forms.YN,fesm2022_forms.X1,header_component.l,ngx_infinite_scroll.e,public_api.$$,public_api.vz,public_api.$n],styles:[health_system_search_componentngResource_default()]})],HealthSystemSearchComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification-error/identity-verification-error.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification-error/identity-verification-error.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>IdentityVerificationErrorComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var identity_verification_error_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification-error/identity-verification-error.component.css?ngResource"),identity_verification_error_componentngResource_default=__webpack_require__.n(identity_verification_error_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let IdentityVerificationErrorComponent=class IdentityVerificationErrorComponent{constructor(configService,route,router){this.configService=configService,this.route=route,this.router=router,this.error="",this.error_description="An internal server error occurred. Please retry after a few moments."}ngOnInit(){this.routeSubscription=this.route.params.subscribe((val=>{this.configService.vaultProfileConfig={identityVerificationFailureCount:(this.configService.vaultProfileConfig$.identityVerificationFailureCount||0)+1},(this.configService.vaultProfileConfig$.identityVerificationFailureCount||0)>=2&&(this.configService.systemConfig={...this.configService.systemConfig$,searchOnly:!0},this.router.navigateByUrl("search"))}))}ngOnDestroy(){this.routeSubscription.unsubscribe()}static{this.ctorParameters=()=>[{type:public_api.we},{type:router.nX},{type:router.Ix}]}static{this.propDecorators={error:[{type:core.Input}],error_description:[{type:core.Input}]}}};IdentityVerificationErrorComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-identity-verification-error",template:'\x3c!-- Error Page --\x3e\n<div class="space-y-6 text-center">\n  <app-header></app-header>\n\n  <div class="space-y-2">\n    <h2 class="text-xl font-semibold text-red-600">\n      Oops! Something went wrong.\n    </h2>\n    <p id="error-message" class="text-sm text-gray-600">\n      We encountered an error while verifying your identity. Please check the details below.\n    </p>\n  </div>\n\n  <div id="error-details" class="bg-gray-100 p-4 rounded-md text-left">\n    <h3 class="text-md font-medium">Error Details:</h3>\n    <p class="text-sm text-gray-800">Error Type: <span class="font-semibold">{{error}}</span></p>\n    <p class="text-sm text-gray-800">Description: <span>{{error_description}}</span></p>\n  </div>\n\n  <div class="space-y-2">\n    <button [routerLink]="\'/auth/identity/verification\'" type="button"\n            class="w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white font-medium py-2.5 px-4 rounded-md flex justify-center items-center">\n      Try Again\n    </button>\n\n  </div>\n</div>\n',standalone:!0,imports:[common.MD,header_component.l,router.iI],styles:[identity_verification_error_componentngResource_default()]})],IdentityVerificationErrorComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification/identity-verification.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'.clear-button {\n  border-radius: 32px;\n  background-color: #041A55;\n\n  font-family: "Inter", serif;\n  font-weight: 600;\n  font-size: 16px;\n  line-height: 26px;\n\n  height: 56px;\n  width: 328px;\n}\n',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification/identity-verification.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{P:()=>IdentityVerificationComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var identity_verification_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/identity-verification/identity-verification.component.css?ngResource"),identity_verification_componentngResource_default=__webpack_require__.n(identity_verification_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts");let IdentityVerificationComponent=class IdentityVerificationComponent{constructor(fastenService,configService,router,logger){this.fastenService=fastenService,this.configService=configService,this.router=router,this.logger=logger,this.loading=!1,this.errorMessage=""}ngOnInit(){}verifyIdentity(){this.loading=!0,this.fastenService.verificationWithPopup().subscribe((result=>{this.loading=!1,this.logger.info("verification result",result),this.router.navigateByUrl("dashboard")}),(err=>{this.loading=!1,this.logger.error("verification error",err);try{var errData=JSON.parse(err.message);this.logger.debug("error_name",errData.error,"error_description",errData.error_description),"timeout"==errData.error?this.router.navigate(["/auth/identity/verification/error"],{queryParams:{error:"timeout",error_description:"timed out waiting for notification from popup"}}):this.router.navigate(["/auth/identity/verification/error"],{queryParams:{error:errData.error,error_description:errData.error_description}})}catch(e){this.logger.error("Error parsing error response",e),this.router.navigate(["/auth/identity/verification/error"],{queryParams:{error:"unknown",error_description:"An unknown error occurred"}})}}))}static{this.ctorParameters=()=>[{type:fasten_service.B},{type:public_api.we},{type:router.Ix},{type:ngx_logger.so}]}};IdentityVerificationComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-identity-verification",template:"\x3c!-- Step: VERIFICATION --\x3e\n<div class=\"space-y-6 text-center\">\n  <app-header></app-header>\n\n  <div class=\"space-y-2\">\n    <h2 class=\"text-xl font-semibold\">\n      Verify your identity<br/>just once\n    </h2>\n    <p id=\"verification-hint\" class=\"text-sm text-gray-600\">\n      Your leaving Acme Labs to verify your identity with our partner,\n      <img src=\"data:image/svg+xml,%3Csvg fill='none' height='129' viewBox='0 0 477 129' width='477' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23041a55'%3E%3Cpath d='m43.6629 11.002c.8485.6349 1.9184.971 2.9513.971.2952 0 .5903-.0373.8485-.0747 2.8038-.4855 4.6483-3.17438 4.2056-5.97532-.2213-1.34445-.9591-2.57686-2.0659-3.36113-2.2503-1.755252-5.4599-1.3071-7.1938.97099-1.7338 2.2781-1.2911 5.52719.9592 7.28246.1107.0747.1845.112.2951.1867z'/%3E%3Cpath d='m81.3643 11.4122c.7009.3735 1.5126.5602 2.2873.5602.5533 0 1.1067-.112 1.6232-.2987 2.7299-.9337 4.1687-3.92135 3.2464-6.6476-.4427-1.3071-1.365-2.39013-2.5824-2.98766-2.5455-1.307108-5.6812-.22408-6.9355 2.35279-1.2543 2.57686-.1845 5.71387 2.361 7.02097z'/%3E%3Cpath d='m115.228 23.811c-2.73-.859-5.644.6722-6.493 3.4358-.848 2.7636.664 5.7139 3.394 6.5729.517.1494 1.033.2241 1.55.2241.848 0 1.66-.2241 2.398-.5976 2.545-1.3444 3.504-4.4815 2.213-7.0584-.664-1.2324-1.734-2.166-3.062-2.5768z'/%3E%3Cpath d='m129.284 61.271c-1.697-2.3155-4.943-2.801-7.267-1.0457-2.325 1.7552-2.767 5.0043-1.033 7.3571 1.697 2.3155 4.943 2.801 7.267 1.0457 1.107-.8216 1.808-2.054 2.029-3.4358.185-1.3818-.184-2.8009-.996-3.9213z'/%3E%3Cpath d='m113.642 94.7637h-.073c-2.952.1494-5.239 2.6515-5.091 5.6393.11 2.801 2.361 5.079 5.164 5.154h.111c2.951-.15 5.239-2.652 5.091-5.6396-.111-2.8009-2.361-5.079-5.165-5.1537z'/%3E%3Cpath d='m86.6756 117.959c-2.3242-1.681-5.5706-1.121-7.2307 1.232s-1.1067 5.639 1.2174 7.32c2.3242 1.68 5.5706 1.12 7.2307-1.233.8116-1.12 1.1067-2.539.8854-3.921-.2214-1.382-.9961-2.577-2.1028-3.398z'/%3E%3Cpath d='m44.9511 117.36c-2.6562.934-4.095 3.847-3.1727 6.536.7009 2.091 2.6193 3.473 4.7959 3.473.5533 0 1.0698-.112 1.6232-.262 2.693-.784 4.2794-3.622 3.5046-6.348-.7747-2.727-3.5784-4.333-6.2715-3.548-.1475.037-.332.112-.4795.149z'/%3E%3Cpath d='m18.1691 95.1782c-2.73-.859-5.6444.6722-6.4929 3.4358-.8485 2.764.6641 5.714 3.394 6.573.5165.149 1.033.224 1.5495.224 2.8775 0 5.2016-2.39 5.1647-5.266 0-2.2779-1.4756-4.2946-3.6153-4.9668z'/%3E%3Cpath d='m2.08517 60.1841c-2.287253 1.7179-2.766839 5.0043-1.06984 7.3198 1.69699 2.3154 4.94342 2.8009 7.23068 1.083 2.28729-1.7179 2.76679-5.0043 1.06984-7.3198-1.69699-2.3154-4.94342-2.8009-7.23068-1.083z'/%3E%3Cpath d='m16.6203 34.0467h.0738c2.8406-.1121 5.0541-2.5769 4.9434-5.4525-.1106-2.7263-2.2872-4.9297-5.0172-5.0044h-.0369c-2.8775.1121-5.0909 2.5769-4.9434 5.4899.1107 2.6889 2.2873 4.8923 4.9803 4.967z'/%3E%3Cpath d='m33.2966 28.8178c.8854.6349 1.9183.971 2.9882.971.2951 0 .5902-.0373.8854-.0747 2.8037-.4854 4.722-3.2117 4.2425-6.05-.4796-2.8383-3.1727-4.7802-5.9764-4.2947-1.365.224-2.5455 1.0083-3.3571 2.1287-1.6601 2.3528-1.1068 5.6392 1.2174 7.3197z'/%3E%3Cpath d='m62.7334 19.4403c.7009.3735 1.4756.5602 2.2873.5602.5533 0 1.1067-.112 1.6232-.2988 2.7299-.8963 4.1687-3.8839 3.2833-6.6102-.8854-2.7636-3.8367-4.22008-6.5298-3.32378-2.7299.89628-4.1687 3.88398-3.2833 6.61018v.0374c.4427 1.3071 1.4019 2.3901 2.6193 3.025z'/%3E%3Cpath d='m91.9153 29.3014c.5165.1493 1.033.224 1.5495.224 2.8775 0 5.1648-2.3528 5.2017-5.2284 0-2.913-2.3242-5.2284-5.1648-5.2658-2.8776 0-5.1648 2.3528-5.2017 5.2285-.0369 2.3154 1.4388 4.3694 3.6153 5.0417z'/%3E%3Cpath d='m110.584 54.1341c.258.0373.516.0747.775.0747 2.877 0 5.164-2.3528 5.164-5.2284 0-2.913-2.324-5.2284-5.164-5.2284-2.878 0-5.165 2.3527-5.165 5.2284 0 2.5395 1.881 4.7429 4.39 5.1537z'/%3E%3Cpath d='m111.431 85.0958c2.878-.1121 5.091-2.5769 4.943-5.4899-.11-2.7262-2.287-4.9296-5.017-5.0043h-.074c-2.877.112-5.091 2.5768-4.943 5.4898.111 2.7263 2.287 4.9297 5.017 5.0044z'/%3E%3Cpath d='m96.4542 100.41c-2.3242-1.6807-5.5706-1.1205-7.2307 1.232-1.6601 2.353-1.1068 5.639 1.2174 7.32 2.3241 1.681 5.5706 1.12 7.2307-1.232 1.6601-2.39 1.1067-5.677-1.2174-7.32z'/%3E%3Cpath d='m63.5095 109.035c-2.7299.934-4.2056 3.959-3.2464 6.723.7009 2.128 2.6931 3.547 4.9065 3.585.5534 0 1.1068-.112 1.6601-.262 2.6931-1.083 4.0212-4.145 2.9513-6.871-.996-2.54-3.6891-3.884-6.3084-3.137z'/%3E%3Cpath d='m41.3006 102.46c-.6271-1.232-1.7339-2.166-3.0251-2.5768-2.7299-.8589-5.6443.6718-6.4928 3.4358s.664 5.714 3.394 6.573c.4796.149 1.0329.224 1.5494.224 2.2504 0 4.2794-1.494 4.9434-3.697.4058-1.27.2583-2.726-.3689-3.959z'/%3E%3Cpath d='m19.7189 74.7486c-2.7668-.4854-5.423 1.3818-5.9394 4.1828-.4796 2.8009 1.3649 5.4898 4.1318 6.0127.1106 0 .1844.0373.2951.0373.2582.0374.5165.0374.7378.0747 1.1068 0 2.1766-.3735 3.0251-1.0457 2.2504-1.7179 2.7299-4.967 1.033-7.2451-.7379-1.083-1.9553-1.8299-3.2834-2.0167z'/%3E%3Cpath d='m18.9065 43.6758h-.0738c-2.8775.112-5.091 2.5768-4.9434 5.4898.1107 2.7263 2.2872 4.9297 5.0172 5.0044h.0738c2.8775-.1121 5.091-2.5769 4.9434-5.4899-.1476-2.7262-2.3241-4.8923-5.0172-5.0043z'/%3E%3Cpath d='m49.601 25.4901c-1.6601 2.3528-1.0698 5.6392 1.2543 7.3197 2.3241 1.6806 5.5706 1.0831 7.2307-1.2697s1.0698-5.6392-1.2543-7.3198c-1.1068-.7843-2.5086-1.1204-3.8367-.8963-1.4019.2614-2.6193 1.0083-3.394 2.1661z'/%3E%3Cpath d='m71.2566 30.0466c.7379 2.2034 2.7669 3.6972 5.091 3.6972.5903 0 1.1437-.112 1.697-.2988 2.8038-.9336 4.3163-3.996 3.394-6.8343-1.1436-2.7636-4.2794-4.108-7.0093-2.9503-2.5086 1.0457-3.8367 3.772-3.1727 6.3862z'/%3E%3Cpath d='m99.5521 44.0186c.8489-2.7636-.6641-5.7139-3.394-6.5729-2.73-.8589-5.6444.6723-6.4929 3.4359-.8484 2.7635.6641 5.7139 3.394 6.5728.5165.1494 1.033.2614 1.5495.2614 2.2503-.0373 4.2424-1.5311 4.9434-3.6972z'/%3E%3Cpath d='m98.8491 60.2993c-2.2873 1.7179-2.7669 4.967-1.0699 7.2451.8117 1.1204 2.0291 1.83 3.3938 2.0541.258.0373.517.0747.775.0747 1.107 0 2.177-.3735 3.025-1.0084 2.324-1.6432 2.914-4.8549 1.291-7.2077s-4.796-2.9504-7.1198-1.3071c-.1107 0-.1844.0746-.2951.1493z'/%3E%3Cpath d='m90.9561 82.8168c-2.0659 2.1287-2.029 5.5646.0738 7.6559.996 1.0084 2.361 1.5312 3.726 1.5312h.0738c2.9513-.2241 5.1647-2.8009 4.9434-5.7886-.1845-2.6889-2.3242-4.8176-4.9803-5.0044h-.0738c-1.4019 0-2.7668.5976-3.7629 1.6059z'/%3E%3Cpath d='m80.59 103.394c1.6601-2.353 1.1068-5.6395-1.2174-7.3201-2.3241-1.6806-5.5706-1.1204-7.2307 1.2324s-1.1067 5.6397 1.2543 7.3197c.8854.635 1.9184.971 2.9882.971.2952 0 .5903-.037.8854-.075 1.3281-.224 2.5455-.971 3.3202-2.128z'/%3E%3Cpath d='m58.7517 98.5022c-.9223-2.7636-3.8367-4.2201-6.5666-3.2864-2.73.9336-4.1687 3.884-3.2464 6.6472.7009 2.129 2.693 3.586 4.9065 3.586.5534 0 1.1067-.075 1.6232-.262 2.6931-.971 4.1687-3.921 3.2833-6.6848z'/%3E%3Cpath d='m37.1682 81.5446c-1.2912-.4109-2.7299-.2988-3.9473.3734-2.5455 1.3445-3.5047 4.5189-2.1766 7.0957.6271 1.2324 1.7339 2.1287 3.0251 2.5769.5164.1494 1.0329.2241 1.5494.2241 2.8406 0 5.1648-2.3155 5.2017-5.1911 0-2.3528-1.4757-4.3695-3.6523-5.079z'/%3E%3Cpath d='m33.5524 65.154c.4058-2.8756-1.5494-5.5271-4.39-5.9379-2.8406-.4109-5.4599 1.5685-5.8657 4.4441-.1845 1.3818.1476 2.7636.9592 3.884 1.697 2.3154 4.9434 2.8009 7.2306 1.083 1.1437-.8216 1.8815-2.0914 2.0659-3.4732z'/%3E%3Cpath d='m35.7285 36.8438h-.0737c-2.8776 0-5.1648 2.3901-5.1648 5.2657s2.361 5.2284 5.2016 5.2284h.0738c2.8407-.112 5.0541-2.5768 4.9434-5.4525-.0737-2.7636-2.2503-4.9296-4.9803-5.0416z'/%3E%3C/g%3E%3Cpath d='m181.378 64.1812c0-14.9383 11.251-26.3288 25.971-26.3288 9.186-.0747 17.745 4.7429 22.504 12.735l-8.596 5.4898c-2.582-5.3405-7.968-8.6642-13.834-8.5149-9.297 0-16.122 7.3572-16.122 16.6189 0 9.0377 6.752 16.5443 15.974 16.5443 6.235.112 11.953-3.6226 14.388-9.4859l8.964 4.855c-4.353 8.9256-13.391 14.5275-23.241 14.4155-15.31-.0374-26.008-11.8013-26.008-26.3289z' fill='%23000'/%3E%3Cpath d='m248.742 38.5605v51.2012h33.239v-9.5979h-23.389v-41.6033z' fill='%23000'/%3E%3Cpath d='m301.241 38.5605v51.2012h34.087v-9.3738h-24.274v-11.6519h19.773v-9.3365h-19.773v-11.5025h24.274v-9.3365z' fill='%23000'/%3E%3Cpath d='m372.478 38.5605-19.147 51.2386h10.072l3.32-9.3365h21.175l3.321 9.3365h10.071l-19.147-51.2386zm4.87 12.5482 7.304 20.3909h-14.646z' fill='%23000'/%3E%3Cpath d='m429.398 47.6729v16.9177h9.997c6.456 0 9.444-4.0707 9.444-8.6269 0-5.0043-3.209-8.2908-9.444-8.2908zm-9.813-9.1124h20.548c11.658 0 18.593 7.5813 18.593 17.3285.148 6.3488-3.32 12.2121-8.89 15.1624l9.997 18.7477h-10.957l-8.116-16.1335h-11.362v16.1335h-9.776v-51.2386z' fill='%23000'/%3E%3Cpath d='m465.516 43.305c0-2.5769 2.029-4.6683 4.575-4.6683 2.545 0 4.611 2.054 4.611 4.6309s-2.029 4.6682-4.537 4.6682c-2.472.0747-4.538-1.9046-4.649-4.4068 0-.0747 0-.1494 0-.224zm8.264 0c-.074-2.0167-1.734-3.6226-3.726-3.5479s-3.578 1.7552-3.505 3.7719c.074 1.9794 1.66 3.5479 3.616 3.5479 1.992 0 3.578-1.6432 3.578-3.6599 0-.0374 0-.0747 0-.112zm-2.619.4108 1.143 1.9793h-1.07l-1.069-1.8673h-.738v1.8673h-.922v-4.855h1.807c.812 0 1.734.2988 1.734 1.4565.037.6349-.332 1.2324-.922 1.4565zm-.923-2.0541h-.774v1.3818h.811c.591 0 .812-.2987.812-.7095s-.332-.6723-.922-.6723z' fill='%23000'/%3E%3C/svg%3E\" style=\"height: 1.25rem;display: inline; vertical-align: bottom;\"/>.\n      This one-time step will bring you right back after your ID has been verified<a routerLink=\"/auth/identity/verification/error\">.</a>\n    </p>\n  </div>\n\n\n  <div class=\"space-y-2 flex flex-col items-center\">\n    <button (click)=\"verifyIdentity()\"\n      [disabled]=\"loading\"\n      type=\"button\"\n            class=\"text-white py-2.5 px-4 flex justify-center items-center clear-button\">\n      <img src=\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Generator: Adobe Illustrator 26.3.1, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 353.2 337.6' style='enable-background:new 0 0 353.2 337.6;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bdisplay:none;%7D .st1%7Bdisplay:inline;fill:%23192958;%7D .st2%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Cg id='BKGD' class='st0'%3E%3Crect class='st1' width='353.2' height='337.6'/%3E%3C/g%3E%3Cg id='Layer_2'%3E%3Cg%3E%3Cg%3E%3Ccircle class='st2' cx='14' cy='168.5' r='14'/%3E%3Ccircle class='st2' cx='77.1' cy='168.5' r='14'/%3E%3Ccircle class='st2' cx='51.3' cy='209.8' r='14'/%3E%3Ccircle class='st2' cx='96.6' cy='227.8' r='14'/%3E%3Ccircle class='st2' cx='99.4' cy='276.8' r='14'/%3E%3Ccircle class='st2' cx='51.3' cy='127.1' r='14'/%3E%3Ccircle class='st2' cx='45.5' cy='72.8' r='14'/%3E%3Ccircle class='st2' cx='96.6' cy='108.7' r='14'/%3E%3Ccircle class='st2' cx='98.4' cy='61.7' r='14'/%3E%3Ccircle class='st2' cx='145.9' cy='72.8' r='14'/%3E%3Ccircle class='st2' cx='207.1' cy='72.8' r='14'/%3E%3Ccircle class='st2' cx='253.3' cy='61.1' r='14'/%3E%3Ccircle class='st2' cx='256.5' cy='109.7' r='14'/%3E%3Ccircle class='st2' cx='301.9' cy='127.1' r='14'/%3E%3Ccircle class='st2' cx='301.9' cy='209.8' r='14'/%3E%3Ccircle class='st2' cx='256.5' cy='227.9' r='14'/%3E%3Ccircle class='st2' cx='308.1' cy='264.2' r='14'/%3E%3Ccircle class='st2' cx='207.1' cy='264.2' r='14'/%3E%3Ccircle class='st2' cx='145.9' cy='264.2' r='14'/%3E%3Ccircle class='st2' cx='45.1' cy='264.2' r='14'/%3E%3Ccircle class='st2' cx='253.3' cy='276.8' r='14'/%3E%3Ccircle class='st2' cx='176.3' cy='301.5' r='14'/%3E%3Ccircle class='st2' cx='226.7' cy='323.6' r='14'/%3E%3Ccircle class='st2' cx='126.6' cy='323.6' r='14'/%3E%3Ccircle class='st2' cx='276.5' cy='168.5' r='14'/%3E%3Ccircle class='st2' cx='339.2' cy='168.5' r='14'/%3E%3Ccircle class='st2' cx='308.1' cy='72.8' r='14'/%3E%3Ccircle class='st2' cx='176.3' cy='35.5' r='14'/%3E%3Ccircle class='st2' cx='126.2' cy='14' r='14'/%3E%3Ccircle class='st2' cx='226.8' cy='14' r='14'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"\n           class=\"px-[8px]\"\n           style=\"height: 24px; display: inline; vertical-align: bottom;\"/>\n      Verify with CLEAR\n    </button>\n  </div>\n\n\n  <div *ngIf=\"loading\" class=\"p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50\" role=\"alert\">\n    Please complete the identity verification process in the new window.\n  </div>\n\n</div>\n\x3c!-- End Step: VERIFICATION --\x3e\n\n",standalone:!0,imports:[common.MD,router.iI,header_component.l],styles:[identity_verification_componentngResource_default()]})],IdentityVerificationComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"code-input {\n  --item-width: 2.5rem;\n  --item-height: 2.5rem;\n  --item-border: 1px solid #d1d5db;\n  --item-border-radius: 0.5rem;\n  --item-font-size: 1.25rem;\n  --item-font-weight: 600;\n  --item-color: #111827;\n  //--item-border-bottom: none;\n  //--item-border-has-value: none;\n  //--item-border-bottom-has-value: 2px solid #888888;\n  //--item-border-focused: none;\n  //--item-border-bottom-focused: 2px solid #809070;\n  //--item-shadow-focused: none;\n}\n",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>VaultProfileSigninCodeComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var vault_profile_signin_code_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin-code/vault-profile-signin-code.component.css?ngResource"),vault_profile_signin_code_componentngResource_default=__webpack_require__.n(vault_profile_signin_code_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),auth_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/auth.service.ts"),timer=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/timer.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),takeWhile=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),angular_code_input=__webpack_require__("./node_modules/angular-code-input/fesm2022/angular-code-input.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts");let VaultProfileSigninCodeComponent=class VaultProfileSigninCodeComponent{constructor(router,authService,logger){this.router=router,this.authService=authService,this.logger=logger,this.loading=!1,this.errorMsg="",this.currentEmail="test@example.com",this.codeExpirySeconds=300,this.timeRemaining$=(0,timer.O)(0,1e3).pipe((0,map.T)((n=>1e3*(this.codeExpirySeconds-n))),(0,takeWhile.v)((n=>n>=0)))}ngOnInit(){}onCodeCompleted(code){this.loading=!0,this.logger.info("submit finish",this.currentEmail,code),this.authService.VaultAuthFinish(this.currentEmail,code).then((()=>{this.loading=!1,this.router.navigateByUrl("dashboard")})).catch((err=>{console.error(err),this.loading=!1,this.errorMsg=err?.name?"code is incorrect":"an unknown error occurred during sign-in"}))}static{this.ctorParameters=()=>[{type:router.Ix},{type:auth_service.u},{type:ngx_logger.so}]}static{this.propDecorators={currentEmail:[{type:core.Input}]}}};VaultProfileSigninCodeComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-vault-profile-signin-code",template:'\x3c!-- Step: VERIFICATION --\x3e\n<div class="space-y-6 text-center">\n  <app-header></app-header>\n\n  <div class="space-y-2">\n    <h2 class="text-xl font-semibold">\n      Enter authentication code<br />from your email\n    </h2>\n    <p id="verification-hint" class="text-sm text-gray-600">\n      A code was sent to <span>{{currentEmail}}</span>\n    </p>\n  </div>\n\n  <div class="flex justify-center space-x-2" id="verification-inputs">\n    <code-input [isCodeHidden]="false"\n                [codeLength]="6"\n                (codeCompleted)="onCodeCompleted($event)">\n    </code-input>\n  </div>\n\n  <p *ngIf="errorMsg" id="verification-error" class="text-sm text-red-500">{{errorMsg}}</p>\n\n  <div class="text-sm text-gray-600">\n    Code expires in\n    <span id="verification-countdown" class="font-semibold text-gray-900">{{timeRemaining$ | async | date:\'mm:ss\'}}</span>\n  </div>\n\n  <div class="space-y-2">\n    <button type="button" id="resend-code"\n            class="verification-button">\n      Re-send code\n    </button>\n    <button type="button" id="use-other-method"\n            style="display:none;"\n            class="verification-button">\n      Use another verification method\n    </button>\n  </div>\n</div>\n\x3c!-- End Step: VERIFICATION --\x3e\n',standalone:!0,imports:[common.MD,router.iI,header_component.l,angular_code_input.aW],styles:[vault_profile_signin_code_componentngResource_default()]})],VaultProfileSigninCodeComponent)},"./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin/vault-profile-signin.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"\n.custom-checkbox {\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.custom-checkbox::before {\n   content: '';\n   display: inline-block;\n   width: 1em;\n   height: 1em;\n   flex-shrink: 0;\n   flex-grow: 0;\n   border: 1px solid #c3c3c3;\n   border-radius: 0.25em;\n   margin-right: 0.5em;\n   background-repeat: no-repeat;\n   background-position: center center;\n   background-size: 50% 50%;\n }\n\n.custom-checkbox-checked::before {\n  border-color: blue;\n  background-color: blue;\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23fff' d='M6.564.75l-3.59 3.612-1.538-1.55L0 4.26 2.974 7.25 8 2.193z'/%3e%3c/svg%3e\");\n}\n\n.custom-checkbox:hover::before {\n  border-color: rgba(0, 0, 255, 0.33);\n}\n",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin/vault-profile-signin.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>VaultProfileSigninComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var vault_profile_signin_componentngResource=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/pages/vault-profile-signin/vault-profile-signin.component.css?ngResource"),vault_profile_signin_componentngResource_default=__webpack_require__.n(vault_profile_signin_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),public_api=__webpack_require__("./projects/shared-library/src/public-api.ts"),auth_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/auth.service.ts"),router=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),fasten_service=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),header_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/header/header.component.ts"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),spinner_component=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/components/spinner/spinner.component.ts");let VaultProfileSigninComponent=class VaultProfileSigninComponent{constructor(configService,authService,fastenService,router,logger){this.configService=configService,this.authService=authService,this.fastenService=fastenService,this.router=router,this.logger=logger,this.loading=!1,this.showMessage=!1,this.submitted=!1,this.existingVaultProfile=new public_api.k5,this.errorMsg="",this.message="",this.needStorageAccessPermissionSubject=new BehaviorSubject.t(!1),this.userInteractionWindowOpened=!1,this.userInteractionCompletedSubject=new BehaviorSubject.t(!1)}ngOnInit(){const urlParams=new URLSearchParams(window.location.search);this.setMessage(urlParams.get("action")||""),this.checkRequiresStoragePermissions()?this.hasStorageAccess().then((hasAccess=>{hasAccess?this.needStorageAccessPermissionSubject.next(!1):this.needStorageAccessPermissionSubject.next(!0)})):(this.logger.log("Not Safari and not Chrome, or storage API not supported (and not necessary). Don't attempt to request cookie storage permissions."),this.needStorageAccessPermissionSubject.next(!1))}signinSubmit(){this.submitted=!0,this.loading=!0,this.authService.Signout().then((m=>{this.logger.info(m)}));var chainPromise=Promise.resolve(!0);this.needStorageAccessPermissionSubject&&(chainPromise=this.requestStorageAccess()),chainPromise.then((result=>(this.logger.info("Signin",this.existingVaultProfile.email),this.authService.VaultAuthBegin(this.existingVaultProfile.email)))).then((()=>this.configService.systemConfig$.apiMode===public_api.wx.Test?this.authService.GetJWTPayload().then((payload=>(this.loading=!1,payload?this.router.navigateByUrl("dashboard"):this.router.navigate(["auth/signin/code"],{queryParams:{currentEmail:this.existingVaultProfile.email}})))):(this.loading=!1,this.router.navigate(["auth/signin/code"],{queryParams:{currentEmail:this.existingVaultProfile.email}})))).catch((err=>{this.loading=!1,this.errorMsg=err?.name?"email or password is incorrect":"an unknown error occurred during sign-in"}))}setMessage(action){"email-changed"===action?(this.showMessage=!0,this.message="Email successfully changed! Please sign in with your new email."):"password-changed"===action&&(this.showMessage=!0,this.message="Password successfully changed! Please sign in with your new password.")}isSafari(){return navigator.userAgent.toLowerCase().indexOf("safari")>=-1}isChrome(){return navigator.userAgent.toLowerCase().indexOf("chrome")>=-1}isStorageAccessApiSupportedByBrowser(){return"hasStorageAccess"in document&&"requestStorageAccess"in document}checkRequiresStoragePermissions(){return(this.isSafari()||this.isChrome())&&this.isStorageAccessApiSupportedByBrowser()}hasStorageAccess(){return this.isStorageAccessApiSupportedByBrowser()?document.hasStorageAccess().then((result=>(this.logger.log("Storage Access API unpartitioned or already granted!",result),!!document.cookie.split("; ").find((row=>row.startsWith("embedFirstPartyCookie=")))?.split("=")[1]||(this.logger.log("no embedFirstPartyCookie found, storage access is partitioned or not granted yet."),!1)))).catch((error=>(this.logger.error("Storage access is partitioned and has not been granted",error),!1))):(this.logger.warn("Storage Access API not available in this browser."),Promise.resolve(!0))}requestStorageAccess(){return this.isStorageAccessApiSupportedByBrowser()?document.requestStorageAccess().then((()=>(this.logger.log("Storage access granted!"),Promise.resolve(!0)))).catch((error=>(this.logger.log("Storage access denied by user",error),alert("Cookies are required for the Fasten widget to function. Please allow storage access to continue."),Promise.reject(!1)))):(this.logger.warn("Storage Access API not available in this browser."),Promise.resolve(!0))}awaitUserInteractionCompleted(){this.needStorageAccessPermissionSubject.getValue()?this.userInteractionCompletedSubject.getValue()?this.logger.log("User interaction already completed, no need to wait."):this.userInteractionWindowOpened?this.logger.log("User interaction window already opened, waiting for completion."):(this.userInteractionWindowOpened=!0,this.fastenService.storageApiUserInteractionWithPopup().subscribe((result=>{this.logger.log("User interaction completed",result),this.userInteractionCompletedSubject.next(result.success),this.userInteractionWindowOpened=!1}))):this.logger.log("No storage access required, no user interaction needed.")}static{this.ctorParameters=()=>[{type:public_api.we},{type:auth_service.u},{type:fasten_service.B},{type:router.Ix},{type:ngx_logger.so}]}};VaultProfileSigninComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"app-auth-signin",template:'\x3c!-- Step: INITIAL --\x3e\n<div id="step-initial" class="space-y-6">\n  <app-header></app-header>\n\n  <div class="flex items-center justify-center space-x-4">\n    <div class="w-10 h-10 text-[#5B47FB]">\n      <img imageFallback="unknown-organization" [src]="(configService.systemConfigSubject | async)?.org?.logo_uri" alt="Organization Logo" class="w-10 h-10 rounded-lg"/>\n    </div>\n\n    <div class="flex space-x-1">\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-100"></div>\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-200"></div>\n      <div class="w-2 h-2 bg-[#5B47FB] rounded-full animate-pulse-flow animate-delay-300"></div>\n    </div>\n\n    <svg id=\'connecting-system-logo-placeholder\' xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'currentColor\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\' ><path d=\'M12 6v4\'/><path d=\'M14 14h-4\'/><path d=\'M14 18h-4\'/><path d=\'M14 8h-4\'/><path d=\'M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2\'/><path d=\'M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18\'/></svg>\n  </div>\n\n  <div class="text-center space-y-2">\n    <h2 class="text-xl font-bold">Connect Your Health Records</h2>\n    <p class="text-sm text-gray-600">\n      {{(configService.systemConfigSubject | async)?.org?.name || \'Unknown\'}} uses Fasten to securely link your health systems\n    </p>\n  </div>\n\n  <div class="space-y-4">\n    \x3c!-- Safe Card --\x3e\n    <div class="flex items-start space-x-4 p-4 border rounded-lg hover:shadow-sm transition-shadow hover:border-[#5B47FB]/30">\n      <div class="p-2 bg-purple-50 rounded-full">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"\n             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n             class="lucide lucide-shield w-5 h-5 text-[#5B47FB]">\n          <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01\n                C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1\n                c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0\n                C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z" />\n        </svg>\n      </div>\n      <div>\n        <h3 class="font-semibold">Safe</h3>\n        <p class="text-sm text-gray-600">\n          Securely connect your medical records with bank-level encryption\n        </p>\n      </div>\n    </div>\n\n    \x3c!-- Private Card --\x3e\n    <div class="flex items-start space-x-4 p-4 border rounded-lg hover:shadow-sm transition-shadow hover:border-[#5B47FB]/30">\n      <div class="p-2 bg-purple-50 rounded-full">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock w-5 h-5 text-[#5B47FB]"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>\n      </div>\n      <div>\n        <h3 class="font-semibold">Private</h3>\n        <p class="text-sm text-gray-600">\n          We never sell your personal info and only use it with your\n          permission\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <form (ngSubmit)="signinSubmit()" #vaultProfileForm="ngForm" [ngClass]="{\n    \'space-y-3\': (needStorageAccessPermissionSubject | async),\n    \'space-y-6\': !(needStorageAccessPermissionSubject | async)\n  }">\n    <label class="block text-sm font-medium text-gray-700">Email address</label>\n    <input [(ngModel)]="existingVaultProfile.email" name="email" #email="ngModel" required email minlength="4" type="email" placeholder="you@example.com"\n           class="block w-full mt-2 px-3 py-2 text-base rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#5B47FB] focus:ring-opacity-20"/>\n    <p id="initialError" class="text-sm text-red-500" *ngIf="email.invalid && (email.dirty || email.touched)">\n        <span *ngIf="email.errors?.[\'required\']">\n          Email is required.\n        </span>\n      <span *ngIf="email.errors?.[\'minlength\']">\n          Email must be at least 4 characters long.\n        </span>\n      <span *ngIf="email.errors?.[\'email\']">\n          Email must be a valid email address.\n        </span>\n      <span *ngIf="errorMsg" class="alert alert-danger mt-3" role="alert">\n          <strong>Error</strong> {{errorMsg}}\n        </span>\n    </p>\n\n    <p *ngIf="!(needStorageAccessPermissionSubject | async); else needStorageAccessPermissionTemplate" class="text-xs text-gray-400 text-center">\n      By clicking continue you agree to:\n      <br/>Fasten\'s <a href="https://policy.fastenhealth.com/connect/privacy_policy.html" class="text-gray-500 hover:text-gray-600 underline">Privacy Policy</a> and\n      <a href="https://policy.fastenhealth.com/terms.html" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Terms & Conditions</a>\n      <br/>{{(configService.systemConfigSubject | async)?.org?.name || \'Unknown\'}}\'s\n      <a href="{{(configService.systemConfigSubject | async)?.org?.privacy_policy_uri}}" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Privacy Policy</a>\n    </p>\n\n    <ng-template #needStorageAccessPermissionTemplate>\n      <p class="text-xs text-gray-400 text-center">\n        <br/>Fasten\'s <span (click)="awaitUserInteractionCompleted()" class="text-gray-500 hover:text-gray-600 underline">Privacy Policy</span> and\n        <a href="https://policy.fastenhealth.com/terms.html" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Terms & Conditions</a>\n        <br/>{{(configService.systemConfigSubject | async)?.org?.name || \'Unknown\'}}\'s\n        <a href="{{(configService.systemConfigSubject | async)?.org?.privacy_policy_uri}}" class="text-gray-500 hover:text-gray-600 underline" target="_blank">Privacy Policy</a>\n      </p>\n      <div class="flex items-center justify-center">\n        <span class="custom-checkbox ml-2 text-sm text-gray-600"\n              [ngClass]="{\n                \'custom-checkbox-checked\': (userInteractionCompletedSubject | async),\n              }"\n            (click)="awaitUserInteractionCompleted()">\n          I agree to Fasten Health\'s Privacy Policy\n        </span>\n      </div>\n    </ng-template>\n\n    <button type="submit"\n      [disabled]="!vaultProfileForm.form.valid || loading || ((needStorageAccessPermissionSubject | async) && !(userInteractionCompletedSubject | async))"\n      class="w-full bg-[#5B47FB] hover:bg-[#4936E8] text-white font-medium py-2.5 px-4 rounded-md flex justify-center items-center">\n      <app-spinner *ngIf="loading"></app-spinner>\n      Continue\n    </button>\n\n  </form>\n</div>\n\x3c!-- End Step: INITIAL --\x3e\n\n\x3c!--<section class="step-panel showing" id="step-initial">--\x3e\n\x3c!--  <div class="brand-header brand-fast">--\x3e\n\x3c!--    <h1 class="brand-title">fasten</h1>--\x3e\n\x3c!--  </div>--\x3e\n\x3c!--  <div class="initial-view-content">--\x3e\n\x3c!--    <div class="logos-row">--\x3e\n\x3c!--      <div class="medical-logo">--\x3e\n\x3c!--        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">--\x3e\n\x3c!--          <rect width="40" height="40" rx="8" fill="#5B47FB"></rect>--\x3e\n\x3c!--          <path d="M20 12V28M12 20H28" stroke="white" stroke-width="3" stroke-linecap="round"--\x3e\n\x3c!--                stroke-linejoin="round"></path>--\x3e\n\x3c!--          <path d="M12 12L28 28M28 12L12 28" stroke="white" stroke-width="3" stroke-linecap="round"--\x3e\n\x3c!--                stroke-linejoin="round" opacity="0.2"></path>--\x3e\n\x3c!--        </svg>--\x3e\n\x3c!--      </div>--\x3e\n\x3c!--      <div class="bubbles-row">--\x3e\n\x3c!--        <div class="bubble"></div>--\x3e\n\x3c!--        <div class="bubble"></div>--\x3e\n\x3c!--        <div class="bubble"></div>--\x3e\n\x3c!--      </div>--\x3e\n\x3c!--      <div class="clearbit-logo-container">--\x3e\n\x3c!--        <img src="assets/images/banner-transparent-trim.png" alt="Fasten Connect" class="clearbit-logo" />--\x3e\n\x3c!--      </div>--\x3e\n\x3c!--    </div>--\x3e\n\n\x3c!--    <h2 class="title-large">Connect Your Health Records</h2>--\x3e\n\x3c!--    <p class="paragraph">Acme Labs uses Fasten to securely link your health systems</p>--\x3e\n\n\x3c!--    <div class="info-cards">--\x3e\n\x3c!--      <div class="info-card">--\x3e\n\x3c!--        <div class="info-card-icon">--\x3e\n\x3c!--          <div class="icon-wrapper bg-brand-purple-faded">--\x3e\n\x3c!--            <svg xmlns="http://www.w3.org/2000/svg" class="icon-shield" viewBox="0 0 24 24" fill="none">--\x3e\n\x3c!--              <path d="M12 2L3 5V11C3 16.52 7.03 21.75 12 23C16.97 21.75 21 16.52 21 11V5L12 2Z" stroke="#5B47FB"--\x3e\n\x3c!--                    stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />--\x3e\n\x3c!--            </svg>--\x3e\n\x3c!--          </div>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--        <div>--\x3e\n\x3c!--          <h3 class="info-title">Safe</h3>--\x3e\n\x3c!--          <p class="info-desc">--\x3e\n\x3c!--            Securely connect your medical records with bank-level encryption--\x3e\n\x3c!--          </p>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--      </div>--\x3e\n\n\x3c!--      <div class="info-card">--\x3e\n\x3c!--        <div class="info-card-icon">--\x3e\n\x3c!--          <div class="icon-wrapper bg-brand-purple-faded">--\x3e\n\x3c!--            <svg xmlns="http://www.w3.org/2000/svg" class="icon-lock" viewBox="0 0 24 24" fill="none">--\x3e\n\x3c!--              <path--\x3e\n\x3c!--                d="M16 10V7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7V10M6 10H18C19.1 10 20 10.9 20 12V19C20 20.1 19.1 21 18 21H6C4.9 21 4 20.1 4 19V12C4 10.9 4.9 10 6 10Z"--\x3e\n\x3c!--                stroke="#5B47FB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />--\x3e\n\x3c!--            </svg>--\x3e\n\x3c!--          </div>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--        <div>--\x3e\n\x3c!--          <h3 class="info-title">Private</h3>--\x3e\n\x3c!--          <p class="info-desc">--\x3e\n\x3c!--            We never sell your personal info and only use it with your permission--\x3e\n\x3c!--          </p>--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--      </div>--\x3e\n\x3c!--    </div>--\x3e\n\n\x3c!--    --\x3e\n\x3c!--  </div>--\x3e\n\x3c!--</section>--\x3e\n\n\x3c!--<div *ngIf="showMessage" class="az-signin-message">--\x3e\n\x3c!--  {{message}}--\x3e\n\x3c!--</div>--\x3e\n\n\n\x3c!--      <form (ngSubmit)="signinSubmit()" #vaultProfileForm="ngForm">--\x3e\n\x3c!--        <div class="form-group">--\x3e\n\x3c!--          <label>Email</label>--\x3e\n\x3c!--          <input [(ngModel)]="existingVaultProfile.email" name="email" #email="ngModel" required email minlength="4" type="text" class="form-control" placeholder="Enter your email address">--\x3e\n\n\n\x3c!--        </div>&lt;!&ndash; form-group &ndash;&gt;--\x3e\n\x3c!--        <button [disabled]="!vaultProfileForm.form.valid || loading" type="submit" class="btn btn-az-primary btn-block">--\x3e\n\x3c!--          Continue--\x3e\n\x3c!--          <span *ngIf="loading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>--\x3e\n\x3c!--        </button>--\x3e\n\n\x3c!--        <div *ngIf="errorMsg" class="alert alert-danger mt-3" role="alert">--\x3e\n\x3c!--          <strong>Error</strong> {{errorMsg}}--\x3e\n\x3c!--        </div>--\x3e\n\x3c!--      </form>--\x3e\n\n\x3c!--    </div>&lt;!&ndash; az-signin-header &ndash;&gt;--\x3e\n\x3c!--  </div>&lt;!&ndash; az-card-signin &ndash;&gt;--\x3e\n\x3c!--</div>&lt;!&ndash; az-signin-wrapper &ndash;&gt;--\x3e\n',standalone:!0,imports:[common.MD,router.iI,header_component.l,public_api.$$,fesm2022_forms.X1,fesm2022_forms.YN,spinner_component.t],styles:[vault_profile_signin_componentngResource_default()]})],VaultProfileSigninComponent)},"./projects/fasten-connect-stitch-embed/src/app/services/auth.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>AuthService});var _home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_environments_environment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./projects/fasten-connect-stitch-embed/src/environments/environment.ts"),_angular_common_http__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),jose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/jose/dist/browser/jwt/verify.js"),jose__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/jose/dist/browser/jwks/remote.js"),_shared_library__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./projects/shared-library/src/public-api.ts");let AuthService=class AuthService{constructor(_httpClient,configService){this._httpClient=_httpClient,this.configService=configService,this.IsAuthenticatedSubject=new rxjs__WEBPACK_IMPORTED_MODULE_5__.t(!1)}VaultAuthBegin(email){var _this=this;return(0,_home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*(){return yield _this._httpClient.post(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/vault_auth_begin`,{email},{withCredentials:!0,params:{public_id:_this.configService.systemConfig$.publicId}}).toPromise()}))()}VaultAuthFinish(email,code){var _this2=this;return(0,_home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*(){return yield _this2._httpClient.post(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/vault_auth_finish`,{email,code},{withCredentials:!0,params:{public_id:_this2.configService.systemConfig$.publicId}}).toPromise()}))()}Signout(){var _this3=this;return(0,_home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*(){return _this3.publishAuthenticationState(!1),_this3.deleteCookie("fasten_connect_auth_vault")}))()}GetJWTPayload(){var _this4=this;return(0,_home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*(){let authToken=_this4.getCookie("fasten_connect_auth_vault");if(!authToken)return null;let jwks=jose__WEBPACK_IMPORTED_MODULE_7__.RD(new URL(_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.jwks_uri)),issuerHost=_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_jwt_issuer_host;try{const{payload,protectedHeader}=yield jose__WEBPACK_IMPORTED_MODULE_6__.V(authToken,jwks,{issuer:issuerHost,audience:issuerHost});return _this4.configService.systemConfig={user:payload},payload}catch(e){return console.error("failed to verify jwt:",e,issuerHost),null}}))()}IsAuthenticated(){var _this5=this;return(0,_home_runner_work_fasten_connect_frontend_ngx_fasten_connect_frontend_ngx_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__.A)((function*(){let isAuthenticated=null!=(yield _this5.GetJWTPayload());return _this5.publishAuthenticationState(isAuthenticated),isAuthenticated}))()}getCookie(name){const ca=decodeURIComponent(document.cookie).split(";"),caLen=ca.length,cookieName=`${name}=`;let c;for(let i=0;i<caLen;i+=1)if(c=ca[i].replace(/^\s+/g,""),0===c.indexOf(cookieName))return c.substring(cookieName.length,c.length);return""}deleteCookie(name){this.setCookie(name,"",-99999)}setCookie(name,value,expireDays,path=""){const d=new Date;d.setTime(d.getTime()+24*expireDays*60*60*1e3);const expires=`expires=${d.toUTCString()}`,cpath=path?`; path=${path}`:"";document.cookie=`${name}=${value}; ${expires}${cpath}; SameSite=Lax`}publishAuthenticationState(authenticated){this.IsAuthenticatedSubject.value!=authenticated&&this.IsAuthenticatedSubject.next(authenticated)}static{this.ctorParameters=()=>[{type:_angular_common_http__WEBPACK_IMPORTED_MODULE_4__.Qq},{type:_shared_library__WEBPACK_IMPORTED_MODULE_8__.we}]}};AuthService=(0,tslib__WEBPACK_IMPORTED_MODULE_1__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injectable)({providedIn:"root"})],AuthService)},"./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>FastenService});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_common_http__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),_environments_environment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./projects/fasten-connect-stitch-embed/src/environments/environment.ts"),rxjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js"),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/throwError.js"),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/repeat.js"),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/switchMap.js"),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/timeout.js"),ngx_device_detector__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/ngx-device-detector/fesm2022/ngx-device-detector.mjs"),ngx_logger__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),_shared_library__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./projects/shared-library/src/public-api.ts");let FastenService=class FastenService{constructor(_httpClient,deviceService,configService,logger){this._httpClient=_httpClient,this.deviceService=deviceService,this.configService=configService,this.logger=logger,this.configService.systemConfigSubject.subscribe((systemConfig=>{this.logger.info("System configuration changed:",systemConfig,this.configService.systemConfig$),systemConfig.org_id&&!systemConfig.org&&(this.logger.info("attempt to download org information, and store in config"),this.getOrg(systemConfig.org_id).subscribe((org=>{this.logger.debug("org:",org),this.configService.systemConfig={org}})))}))}recordLocatorRegisterAndPollForStatus(){return this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/record_locator`,{params:{public_id:this.configService.systemConfig$.publicId}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_9__.n)((registerResponse=>"failed"==registerResponse.data.status?(console.error("record locator registration failed",registerResponse.data),(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.$)((()=>new Error("Record locator registration failed")))):"success"==registerResponse.data.status?(console.info("record locator already successful, no need to poll"),(0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)(registerResponse)):(console.log("start polling for record locator status"),this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/record_locator/${registerResponse.data.task_id}`,{params:{public_id:this.configService.systemConfig$.publicId}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_8__.u)({delay:3e3}),(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.p)((statusResponse=>"success"===statusResponse.data.status||"failed"===statusResponse.data.status)),(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.s)(1),(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.w)(3e5))))))}recordLocatorResults(taskId){return this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/record_locator/${taskId}/result`,{params:{public_id:this.configService.systemConfig$.publicId}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>response.data)))}searchCatalog(apiMode,filter){("string"==typeof filter.searchAfter||filter.searchAfter instanceof String)&&filter.searchAfter.length>0?filter.searchAfter=filter.searchAfter.split(","):filter.searchAfter=[];const endpointUrl=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/catalog/search`);return this._httpClient.post(endpointUrl.toString(),filter,{params:{public_id:this.configService.systemConfig$.publicId,api_mode:apiMode}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>(this.logger.info("Metadata RESPONSE",response),response.data))))}searchCatalogBrand(apiMode,brandId){const endpointUrl=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/catalog/search/${brandId}`);return this._httpClient.post(endpointUrl.toString(),{},{params:{public_id:this.configService.systemConfig$.publicId,api_mode:apiMode}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>(this.logger.info("Metadata RESPONSE",response),response.data))))}getOrg(orgId){return this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/org/${orgId}`,{params:{public_id:this.configService.systemConfig$.publicId}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>(this.logger.info("Organization",response),response.data))))}getOrgByPublicId(publicId){let queryParams={};return queryParams.public_id=publicId,this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/org`,{params:queryParams}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>(this.logger.info("Organization",response),response.data))))}getOrgConnectionById(publicId,orgConnectionId){let queryParams={};return queryParams.public_id=publicId,this._httpClient.get(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/org_connection/${orgConnectionId}`,{params:queryParams}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>(this.logger.info("Organization Connection Data",response),response.data))))}requestHealthSystem(requestHealth){const endpointUrl=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/support/healthsystem`);return this._httpClient.post(endpointUrl.toString(),requestHealth).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>({}))))}requestSupport(request){const endpointUrl=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/support/request`);let body=request.request_content+"\n\n\n```"+JSON.stringify({healthsystem_name:request.healthsystem_name,version:request.version,arch:request.arch,os:request.os,error:request.error,error_description:request.error_description,brand_id:request.brand_id,portal_id:request.portal_id,endpoint_id:request.endpoint_id,org_connection_id:request.org_connection_id,external_id:request.external_id,external_state:request.external_state,request_id:request.request_id})+"```",zendeskTicket={name:request.email,email:request.email,body,subject:`Support Request from ${request.healthsystem_name}`,organization_id:this.configService.systemConfig$.org?.id||"",organization_name:this.configService.systemConfig$.org?.name||"",api_mode:this.configService.systemConfig$.apiMode||"test"};return this._httpClient.post(endpointUrl.toString(),zendeskTicket).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((response=>({}))))}storageApiUserInteractionWithPopup(){const redirectUrl=new URL(`${window.location.origin}/consent`);let features="";this.deviceService.isDesktop()&&(features="popup=true,width=700,height=600");let openedWindow=window.open(redirectUrl.toString(),"_blank",features);return(0,_shared_library__WEBPACK_IMPORTED_MODULE_14__.dI)(this.logger,openedWindow,_shared_library__WEBPACK_IMPORTED_MODULE_14__.eu.None)}verificationWithPopup(){const redirectUrl=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/identity_verification/connect`);redirectUrl.searchParams.set("public_id",this.configService.systemConfig$.publicId);let features="";this.deviceService.isDesktop()&&(features="popup=true,width=700,height=600");let openedWindow=window.open(redirectUrl.toString(),"_blank",features);return(0,_shared_library__WEBPACK_IMPORTED_MODULE_14__.dI)(this.logger,openedWindow,this.configService.systemConfig$.sdkMode)}accountConnectWithPopup(brandId,portalId,endpointId,reconnectOrgConnectionId,externalId,externalState,reconnectVaultProfileConnectionId){const redirectUrlParts=new URL(`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/connect`),redirectParams=new URLSearchParams;redirectParams.set("public_id",this.configService.systemConfig$.publicId),redirectParams.set("brand_id",brandId),redirectParams.set("portal_id",portalId),redirectParams.set("endpoint_id",endpointId),redirectParams.set("connect_mode","popup"),redirectParams.set("sdk_mode",this.configService.systemConfig$.sdkMode),reconnectOrgConnectionId&&redirectParams.set("reconnect_org_connection_id",reconnectOrgConnectionId),externalId&&redirectParams.set("external_id",externalId),externalState&&redirectParams.set("external_state",externalState),reconnectVaultProfileConnectionId&&redirectParams.set("reconnect_vault_profile_connection_id",reconnectVaultProfileConnectionId),redirectUrlParts.search=redirectParams.toString(),this.logger.debug(redirectUrlParts.toString());let features="";this.deviceService.isDesktop()&&(features="popup=true,width=700,height=600");let openedWindow=window.open(redirectUrlParts.toString(),"_blank",features);return(0,_shared_library__WEBPACK_IMPORTED_MODULE_14__.dI)(this.logger,openedWindow,this.configService.systemConfig$.sdkMode)}authorizeTefcaDirect(vaultConnectionIds,external_id){const url=`${_environments_environment__WEBPACK_IMPORTED_MODULE_3__.c.connect_api_endpoint_base}/bridge/vault_connection/authorize`;return this._httpClient.post(url,{vault_connection_ids:vaultConnectionIds,external_id},{params:{public_id:this.configService.systemConfig$.publicId}}).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.T)((resp=>resp.data)))}static{this.ctorParameters=()=>[{type:_angular_common_http__WEBPACK_IMPORTED_MODULE_2__.Qq},{type:ngx_device_detector__WEBPACK_IMPORTED_MODULE_12__.Kg},{type:_shared_library__WEBPACK_IMPORTED_MODULE_14__.we},{type:ngx_logger__WEBPACK_IMPORTED_MODULE_13__.so}]}};FastenService=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Injectable)({providedIn:"root"})],FastenService)},"./projects/fasten-connect-stitch-embed/src/app/utils/connect-helper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>ProcessTefcaDirectAuthorizationResultsHelper,p:()=>ConnectHelper});var _services_fasten_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./projects/fasten-connect-stitch-embed/src/app/services/fasten.service.ts"),_angular_router__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/router/fesm2022/router.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_shared_library__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./projects/shared-library/src/public-api.ts"),uuid__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");function ConnectHelper(connectData){const vaultApi=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_services_fasten_service__WEBPACK_IMPORTED_MODULE_0__.B),configService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_shared_library__WEBPACK_IMPORTED_MODULE_3__.we),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_angular_router__WEBPACK_IMPORTED_MODULE_1__.Ix),messageBusService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_shared_library__WEBPACK_IMPORTED_MODULE_3__.BG);connectData.external_state||(connectData.external_state=(0,uuid__WEBPACK_IMPORTED_MODULE_4__.A)()),messageBusService.publishOrgConnectionPending(connectData);let onSuccessNavigateByUrl="dashboard";connectData.org_connection_id&&(onSuccessNavigateByUrl="dashboard/complete"),vaultApi.accountConnectWithPopup(connectData.brand_id,connectData.portal_id,connectData.endpoint_id,connectData.org_connection_id,connectData.external_id,connectData.external_state,connectData.vault_profile_connection_id).subscribe((orgConnectionCallbackData=>{orgConnectionCallbackData&&(messageBusService.publishOrgConnectionComplete(orgConnectionCallbackData),configService.vaultProfileAddConnectedAccount(orgConnectionCallbackData),router.navigateByUrl(onSuccessNavigateByUrl))}),(err=>{console.error("popup error data",err);try{let errData;if(errData="string"==typeof err?JSON.parse(err):"string"==typeof err.message?JSON.parse(err.message):err,"timeout"==errData.error)return router.navigateByUrl(onSuccessNavigateByUrl);console.error("an error occurred while attempting to connect health system",err),messageBusService.publishOrgConnectionComplete({org_connection_id:connectData.org_connection_id,endpoint_id:connectData.endpoint_id,brand_id:connectData.brand_id,portal_id:connectData.portal_id,request_id:errData.request_id,error:errData.error||"unknown_error_during_connect",error_description:errData.error_description||"an unknown error occurred during the connection process"}),router.navigate(["form/support"],{queryParams:{error:errData.error||"unknown_error_during_connect",error_description:errData.error_description||"an unknown error occurred during the connection process",brand_id:connectData.brand_id,portal_id:connectData.portal_id,endpoint_id:connectData.endpoint_id,org_connection_id:connectData.org_connection_id,vault_profile_connection_id:connectData.vault_profile_connection_id,external_id:connectData.external_id,external_state:connectData.external_state||errData.external_state,request_id:errData.request_id}})}catch(e){console.error("caught error parsing error data",e),messageBusService.publishOrgConnectionComplete({org_connection_id:connectData.org_connection_id,endpoint_id:connectData.endpoint_id,brand_id:connectData.brand_id,portal_id:connectData.portal_id,error:"unknown_error_during_connect",error_description:"an unknown error occurred during the connection process"}),router.navigate(["form/support"],{queryParams:{error:"unknown_error_during_connect",error_description:`an unknown error occurred during the connection process: ${err}`,brand_id:connectData.brand_id,portal_id:connectData.portal_id,endpoint_id:connectData.endpoint_id,org_connection_id:connectData.org_connection_id,vault_profile_connection_id:connectData.vault_profile_connection_id,external_id:connectData.external_id,external_state:connectData.external_state||err.external_state}})}return null}))}function ProcessTefcaDirectAuthorizationResultsHelper(vaultConnectionIds,resp){const configService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_shared_library__WEBPACK_IMPORTED_MODULE_3__.we),messageBusService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.inject)(_shared_library__WEBPACK_IMPORTED_MODULE_3__.BG),successes=resp?.successes||{},failures=resp?.failures||{},vaultProfile=configService.vaultProfileConfig$,idToExternalState={},pending=vaultProfile?.pendingPatientAccounts||{},discovered=vaultProfile?.discoveredPatientAccounts||{};Object.entries(pending).forEach((([extState,acct])=>{acct?.vault_profile_connection_id&&(idToExternalState[acct.vault_profile_connection_id]=extState)})),Object.entries(discovered).forEach((([extState,acct])=>{acct?.vault_profile_connection_id&&(idToExternalState[acct.vault_profile_connection_id]=extState)})),vaultConnectionIds.forEach((id=>{const successData=successes[id],failureData=failures[id],external_state=idToExternalState[id];if(successData){const orgConnectionId=successData.org_connection_id??"",connectionStatus=successData.connection_status??"authorized",platformType=successData.platform_type??"tefca",payload={external_state,external_id:configService.systemConfig$.externalId,request_id:resp?.request_id,org_connection_id:orgConnectionId,connection_status:connectionStatus,platform_type:platformType,vault_profile_connection_id:id,patient_auth_type:"tefca_direct"};messageBusService.publishOrgConnectionComplete(payload),external_state&&configService.vaultProfileAddConnectedAccount(payload)}else if(failureData){let error=failureData.error,errorDescription=failureData.error_description;error||(error="fasten_server_error",errorDescription="An unknown server error occurred: missing error type");const payload={external_state,vault_profile_connection_id:id,external_id:configService.systemConfig$.externalId,request_id:resp?.request_id,error,error_description:errorDescription};messageBusService.publishOrgConnectionComplete(payload)}else{const payload={external_state,vault_profile_connection_id:id,external_id:configService.systemConfig$.externalId,request_id:resp?.request_id,error:"fasten_server_error",error_description:"An unknown server error occurred: missing error type"};messageBusService.publishOrgConnectionComplete(payload)}}))}},"./projects/fasten-connect-stitch-embed/src/environments/environment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>environment});const environment={name:"production",lighthouse_api_endpoint_base:"https://lighthouse.fastenhealth.com",connect_api_endpoint_base:"https://api.connect.fastenhealth.com/v1",connect_api_jwt_issuer_host:"https://api.connect.fastenhealth.com/v1",jwks_uri:"https://cdn.fastenhealth.com/jwks/fasten-connect/prod.json"}},"./projects/shared-library/src/public-api.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var ApiMode,WidgetMode,ConnectionStatus,ConnectMode,SourceCredentialType,EventTypes,SDKMode,CommunicationEntity;__webpack_require__.d(__webpack_exports__,{wx:()=>ApiMode,qo:()=>CommunicationEntity,we:()=>ConfigService,mi:()=>ConnectWindowTimeout,wf:()=>EventTypes,Xt:()=>FormHealthSystemRequest,T:()=>FormSupportRequest,$$:()=>ImageFallbackDirective,Mz:()=>MessageBusEventPayload,BG:()=>MessageBusService,eu:()=>SDKMode,$n:()=>SafeHtmlPipe,$6:()=>SearchFilter,H7:()=>SourceCredentialType,vz:()=>StateNamePipe,k5:()=>VaultProfile,QO:()=>VaultProfileConfig,dI:()=>waitForOrgConnectionOrTimeout}),function(ApiMode){ApiMode.Live="live",ApiMode.Test="test"}(ApiMode||(ApiMode={})),function(WidgetMode){WidgetMode.SearchOnly="search-only",WidgetMode.Connect="connect",WidgetMode.Tefca="tefca"}(WidgetMode||(WidgetMode={})),function(ConnectionStatus){ConnectionStatus.Authorized="authorized",ConnectionStatus.Revoked="revoked"}(ConnectionStatus||(ConnectionStatus={})),function(ConnectMode){ConnectMode.Redirect="redirect",ConnectMode.Popup="popup"}(ConnectMode||(ConnectMode={})),function(SourceCredentialType){SourceCredentialType.SourceCredentialTypeSmartOnFhir="smart_on_fhir",SourceCredentialType.SourceCredentialTypeTefcaDirect="tefca_direct",SourceCredentialType.SourceCredentialTypeTefcaFacilitated="tefca_facilitated"}(SourceCredentialType||(SourceCredentialType={})),function(EventTypes){EventTypes.EventTypeWidgetConfigError="widget.config_error",EventTypes.EventTypeWidgetClose="widget.close",EventTypes.EventTypeWidgetComplete="widget.complete",EventTypes.EventTypeConnectionPending="patient.connection_pending",EventTypes.EventTypeConnectionSuccess="patient.connection_success",EventTypes.EventTypeConnectionFailed="patient.connection_failed",EventTypes.EventTypeSearchQuery="search.query"}(EventTypes||(EventTypes={})),function(SDKMode){SDKMode.None="none",SDKMode.ReactNative="react-native"}(SDKMode||(SDKMode={})),function(CommunicationEntity){CommunicationEntity.PrimaryWebView="FASTEN_CONNECT_PRIMARY_WEBVIEW",CommunicationEntity.ModalWebView="FASTEN_CONNECT_MODAL_WEBVIEW",CommunicationEntity.ReactNativeComponent="FASTEN_CONNECT_REACT_WEBVIEW",CommunicationEntity.External="FASTEN_CONNECT_EXTERNAL"}(CommunicationEntity||(CommunicationEntity={}));const ConnectWindowTimeout=12e5;var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),platform_browser=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/platform-browser.mjs");let SafeHtmlPipe=class SafeHtmlPipe{constructor(sanitizer){this.sanitizer=sanitizer}transform(value,args){return this.sanitizer.bypassSecurityTrustHtml(value)}static{this.ctorParameters=()=>[{type:platform_browser.up}]}};SafeHtmlPipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"safeHtml",standalone:!0})],SafeHtmlPipe);let StateNamePipe=class StateNamePipe{constructor(){this.stateCodes={ALL:"Nationwide",AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming",AS:"American Samoa",DC:"District of Columbia",FM:"Federated States of Micronesia",GU:"Guam",MH:"Marshall Islands",MP:"Northern Mariana Islands",PW:"Palau",PR:"Puerto Rico",VI:"Virgin Islands",AA:"Armed Forces Americas",AE:"Armed Forces Europe",AP:"Armed Forces Pacific"}}transform(value){return this.stateCodes[value]||value}};StateNamePipe=(0,tslib_es6.Cg)([(0,core.Pipe)({name:"stateName",standalone:!0})],StateNamePipe);let ImageFallbackDirective=class ImageFallbackDirective{constructor(elementRef){this.elementRef=elementRef,this.hospitalInlineImage="data:image/svg+xml,%3csvg id='connecting-system-logo-placeholder' xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='text-gray-400'%3e%3cpath d='M12 6v4'/%3e%3cpath d='M14 14h-4'/%3e%3cpath d='M14 18h-4'/%3e%3cpath d='M14 8h-4'/%3e%3cpath d='M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2'/%3e%3cpath d='M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18'/%3e%3c/svg%3e",this.officeInlineImage="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='lucide lucide-building-2 w-10 h-10 text-gray-400'%3e%3cpath d='M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z'/%3e%3cpath d='M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2'/%3e%3cpath d='M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2'/%3e%3cpath d='M10 6h4'/%3e%3cpath d='M10 10h4'/%3e%3cpath d='M10 14h4'/%3e%3cpath d='M10 18h4'/%3e%3c/svg%3e",this.fastenSquareInlineImage="data:image/svg+xml,%3csvg version='1.2' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1640 1640' width='1640' height='1640'%3e%3ctitle%3esquare%3c/title%3e%3cstyle%3etspan %7b white-space:pre %7d .s0 %7b fill: white %7d .t1 %7b font-size: 400px%3bfill: %235b47fb%3bfont-weight: 700%3bfont-family: 'Poppins-Bold'%2c 'Poppins' %7d%3c/style%3e%3cpath id='Layer 1' fill-rule='evenodd' class='s0' d='m-90-48h1752v1727h-1752z'/%3e%3ctext id='fasten' style='transform: matrix(1.356%2c0%2c0%2c1.356%2c8.863%2c630.478)'%3e%3ctspan x='0' y='296' class='t1' dx='0'%3ef%3c/tspan%3e%3ctspan y='296' class='t1' dx='0'%3ea%3c/tspan%3e%3ctspan y='296' class='t1' dx='0'%3es%3c/tspan%3e%3ctspan y='296' class='t1' dx='0'%3et%3c/tspan%3e%3ctspan y='296' class='t1' dx='0'%3ee%3c/tspan%3e%3ctspan y='296' class='t1' dx='0 -21'%3en%3c/tspan%3e%3c/text%3e%3c/svg%3e",this.fastenLogoInlineImage="data:image/svg+xml,%3csvg version='1.2' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1640 1640' width='1640' height='1640'%3e%3ctitle%3esquare%3c/title%3e%3cstyle%3etspan %7b white-space:pre %7d .s0 %7b fill: white %7d .t1 %7b font-size: 282px%3bfill: %235b47fb%3bfont-weight: 700%3bfont-family: 'Poppins-Bold'%2c 'Poppins' %7d%3c/style%3e%3cpath id='Layer 1' fill-rule='evenodd' class='s0' d='m-90-48h1752v1727h-1752z'/%3e%3ctext id='fh' style='transform: matrix(4.298%2c0%2c0%2c4.298%2c252%2c393)'%3e%3ctspan x='0' y='208.4' class='t1' dx='0'%3ef%3c/tspan%3e%3ctspan y='208.4' class='t1' dx='0'%3eh%3c/tspan%3e%3ctspan y='208.4' class='t1' dx='0'%3e%3c/tspan%3e%3c/text%3e%3c/svg%3e",this.unknownOrganizationInlineImage="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40' fill='none'%3E%3Crect width='40' height='40' rx='8' fill='currentColor' /%3E%3Cpath d='M20 12V28M12 20H28' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' /%3E%3Cpath d='M12 12L28 28M28 12L12 28' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' opacity='0.2' /%3E%3C/svg%3E"}loadFallbackOnError(){this.path(this.elementRef.nativeElement.src)!=this.path(this.fallbackSrc())&&(this.elementRef.nativeElement.src=this.fallbackSrc())}fallbackSrc(){return"hospital"===this.imageFallback?this.hospitalInlineImage:"office"===this.imageFallback?this.officeInlineImage:"fasten"===this.imageFallback?this.fastenSquareInlineImage:"fasten-logo"===this.imageFallback?this.fastenLogoInlineImage:"unknown-organization"==this.imageFallback?this.unknownOrganizationInlineImage:this.imageFallback||"https://cdn.fastenhealth.com/images/no-image.svg"}path(urlString){return urlString.replace(/^https?:\/\/[^\/]*/,"")}static{this.ctorParameters=()=>[{type:core.ElementRef}]}static{this.propDecorators={imageFallback:[{type:core.Input}],loadFallbackOnError:[{type:core.HostListener,args:["error"]}]}}};ImageFallbackDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"img[imageFallback]",standalone:!0})],ImageFallbackDirective);var BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),ngx_logger=__webpack_require__("./node_modules/ngx-logger/fesm2020/ngx-logger.mjs"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const defaultSystemConfig={publicId:"",apiMode:ApiMode.Test,sdkMode:SDKMode.None};let ConfigService=class ConfigService{constructor(logger){this.logger=logger,this.systemConfigSubject=new BehaviorSubject.t(defaultSystemConfig),this.vaultProfileConfigSubject=new BehaviorSubject.t(Object.setPrototypeOf({},VaultProfileConfig.prototype)),this.searchConfigSubject=new BehaviorSubject.t({})}set systemConfig(value){const mergedSettings=(0,lodash.merge)({},this.systemConfigSubject.getValue(),value);JSON.stringify(mergedSettings)!==JSON.stringify(this.systemConfigSubject.getValue())&&(this.logger.info("updating system settings:",mergedSettings),this.systemConfigSubject.next(mergedSettings))}get systemConfig$(){return this.logger.info("getting cached system settings:",this.systemConfigSubject.getValue()),this.systemConfigSubject.getValue()}set vaultProfileConfig(value){const mergedSettings=(0,lodash.merge)({},this.vaultProfileConfigSubject.getValue(),value);JSON.stringify(mergedSettings)!==JSON.stringify(this.vaultProfileConfigSubject.getValue())&&(this.logger.info("updating vault profile settings:",mergedSettings),this.vaultProfileConfigSubject.next(Object.setPrototypeOf(mergedSettings,VaultProfileConfig.prototype)))}get vaultProfileConfig$(){return this.logger.info("getting vault profile settings:",this.vaultProfileConfigSubject.getValue()),this.vaultProfileConfigSubject.getValue()}vaultProfileAddPendingAccount(brand,portal,endpoint){let updatedVaultProfile=this.vaultProfileConfig$,externalState=(0,v4.A)();updatedVaultProfile.addPendingAccount(externalState,brand,portal,endpoint),this.vaultProfileConfig=updatedVaultProfile}vaultProfileAddConnectedAccount(connectedAccount){if(connectedAccount.error)return void this.logger.error("Error connecting account",connectedAccount);let updatedVaultProfile=this.vaultProfileConfig$;updatedVaultProfile.addConnectedAccount(connectedAccount.external_state||"",connectedAccount.org_connection_id,connectedAccount.connection_status,connectedAccount.platform_type,connectedAccount.brand_id,connectedAccount.portal_id,connectedAccount.endpoint_id,connectedAccount.vault_profile_connection_id,connectedAccount.patient_auth_type),this.vaultProfileConfig=updatedVaultProfile}vaultProfileAddPendingRecordLocatorAccount(recordLocatorFacility,vaultProfileConnectionId){let updatedVaultProfile=this.vaultProfileConfig$,externalState=(0,v4.A)();updatedVaultProfile.addPendingAccount(externalState,recordLocatorFacility.brand,recordLocatorFacility.portal,recordLocatorFacility.endpoint,vaultProfileConnectionId),this.vaultProfileConfig=updatedVaultProfile}vaultProfileAddDiscoveredRecordLocatorAccount(recordLocatorFacility,vaultProfileConnectionId){let updatedVaultProfile=this.vaultProfileConfig$,externalState=(0,v4.A)();updatedVaultProfile.addDiscoveredAccount(externalState,recordLocatorFacility.brand,recordLocatorFacility.portal,recordLocatorFacility.endpoint,vaultProfileConnectionId),this.vaultProfileConfig=updatedVaultProfile}set searchConfig(value){const mergedSettings=(0,lodash.merge)({},this.searchConfigSubject.getValue(),value);JSON.stringify(mergedSettings)!==JSON.stringify(this.searchConfigSubject.getValue())&&(this.logger.info("updating search settings:",mergedSettings),this.searchConfigSubject.next(mergedSettings))}get searchConfig$(){return this.logger.info("getting search settings:",this.searchConfigSubject.getValue()),this.searchConfigSubject.getValue()}static{this.ctorParameters=()=>[{type:ngx_logger.so}]}};ConfigService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],ConfigService);let MessageBusService=class MessageBusService{constructor(configService){this.configService=configService,this.messageBusSubject=new BehaviorSubject.t(null)}publishWidgetConfigError(){let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.event_type=EventTypes.EventTypeWidgetConfigError,this.messageBusSubject.next(eventPayload)}publishOrgConnectionPending(pendingConnectData){let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.data=pendingConnectData,eventPayload.event_type=EventTypes.EventTypeConnectionPending,this.messageBusSubject.next(eventPayload)}publishOrgConnectionComplete(orgConnectionCallbackData){let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.data=orgConnectionCallbackData,orgConnectionCallbackData.error?eventPayload.event_type=EventTypes.EventTypeConnectionFailed:eventPayload.event_type=EventTypes.EventTypeConnectionSuccess,this.messageBusSubject.next(eventPayload)}publishComplete(){let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.data=this.configService.vaultProfileConfig$.connectedPatientAccounts?.map((account=>({connection_status:account.connection_status,org_connection_id:account.org_connection_id,platform_type:account.platform_type,brand_id:account.brand?.id,portal_id:account.portal?.id,endpoint_id:account.endpoint?.id})))||[],eventPayload.event_type=EventTypes.EventTypeWidgetComplete,this.messageBusSubject.next(eventPayload)}publishRequestClose(){let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.event_type=EventTypes.EventTypeWidgetClose,this.messageBusSubject.next(eventPayload)}publishSearchQuery(query,locations,external_id,total_results){if(!this.configService.systemConfig$.eventTypes?.includes(EventTypes.EventTypeSearchQuery))return;if(!query?.trim())return;let eventPayload=new MessageBusEventPayload;eventPayload.api_mode=this.configService.systemConfig$.apiMode,eventPayload.event_type=EventTypes.EventTypeSearchQuery,eventPayload.data={query,timestamp:Date.now(),filter:{locations:locations||[]},results:{total:total_results},external_id},this.messageBusSubject.next(eventPayload)}static{this.ctorParameters=()=>[{type:ConfigService}]}};MessageBusService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],MessageBusService);class VaultProfileConfig{addPendingAccount(externalState,brand,portal,endpoint,vaultProfileConnectionId){this.pendingPatientAccounts||(this.pendingPatientAccounts={}),this.pendingPatientAccounts[externalState]={brand,portal,endpoint,vault_profile_connection_id:vaultProfileConnectionId}}addDiscoveredAccount(externalState,brand,portal,endpoint,vaultProfileConnectionId){this.discoveredPatientAccounts||(this.discoveredPatientAccounts={}),this.discoveredPatientAccounts[externalState]={brand,portal,endpoint,vault_profile_connection_id:vaultProfileConnectionId}}addConnectedAccount(external_state,org_connection_id,connection_status,platform_type,brand_id,portal_id,endpoint_id,vault_profile_connection_id,patient_auth_type){this.connectedPatientAccounts||(this.connectedPatientAccounts=[]);let foundPendingPatientAccount=this.pendingPatientAccounts?.[external_state],foundDiscoveredPatientAccount=this.discoveredPatientAccounts?.[external_state];foundPendingPatientAccount?(delete this.pendingPatientAccounts[external_state],this.connectedPatientAccounts?.push({org_connection_id,connection_status,platform_type,brand:foundPendingPatientAccount.brand,portal:foundPendingPatientAccount.portal,endpoint:foundPendingPatientAccount.endpoint,vault_profile_connection_id,patient_auth_type})):foundDiscoveredPatientAccount?(delete this.discoveredPatientAccounts[external_state],this.connectedPatientAccounts?.push({org_connection_id,connection_status,platform_type,brand:foundDiscoveredPatientAccount.brand,portal:foundDiscoveredPatientAccount.portal,endpoint:foundDiscoveredPatientAccount.endpoint,vault_profile_connection_id,patient_auth_type})):(console.warn("we may not know the brand, portal, endpoint information, so generating it with placeholders. Most likely this is a reconnect operation."),console.warn("pendingAccounts",this.pendingPatientAccounts,"connectionParams",org_connection_id,connection_status,platform_type,brand_id,portal_id,endpoint_id),this.connectedPatientAccounts?.push({org_connection_id,connection_status,platform_type,vault_profile_connection_id,patient_auth_type,brand:{id:brand_id,name:"unknown",portals:[],hidden:!1,last_updated:"",portal_ids:[portal_id]},portal:{id:portal_id,last_updated:"",endpoint_ids:[endpoint_id],name:"unknown"},endpoint:{id:endpoint_id,platform_type}}))}}class VaultProfile{constructor(){this.password_confirm="",this.agree_terms=!1}}class FormHealthSystemRequest{constructor(){this.name="",this.email="",this.website="",this.street_address=""}}class FormSupportRequest{}class MessageBusEventPayload{}class SearchFilter{constructor(){this.query="",this.platformTypes=[],this.categories=[],this.showHidden=!1,this.locations=["ALL"],this.searchAfter="",this.fields=[]}}var fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),timeout=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/timeout.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),first=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/first.js"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),catchError=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/catchError.js");function waitForOrgConnectionOrTimeout(logger,openedWindow,sdkMode){return logger.info("waiting for postMessage notification from popup window"),(0,fromEvent.R)(window,"message").pipe((0,timeout.w)(ConnectWindowTimeout),(0,filter.p)((event=>(logger.debug("received postMessage event, must determine if this message is safe to process",event),sdkMode==SDKMode.ReactNative&&window.ReactNativeWebView?!event.source&&!event.origin||(logger.debug("ignoring postMessage event from unknown source or origin. React-native webview should be null for both",event.source,event.origin),!1):event.source!=openedWindow?(logger.debug("ignoring postMessage event from unknown source window",event.source),!1):"https://api.connect-dev.fastenhealth.com"==event.origin||"https://api.connect.fastenhealth.com"==event.origin||"https://embed.connect-dev.fastenhealth.com"==event.origin||"https://embed.connect.fastenhealth.com"==event.origin||(logger.debug("ignoring postMessage event from unknown origin",event.origin),!1)))),(0,first.$)(),(0,map.T)((event=>{logger.info("received postMessage notification from popup window & sending acknowledgment",event.data),event?.source?.postMessage(JSON.stringify({close:!0}),event.origin);let parsedEventData=JSON.parse(event.data);if(parsedEventData.error)throw new Error(event.data);return parsedEventData})),(0,catchError.W)((err=>{throw openedWindow.self.close(),err instanceof timeout.M?(logger.warn(`timed out waiting for notification from popup (${ConnectWindowTimeout/1e3}s), closing window`),new Error(JSON.stringify({error:"timeout",error_description:"timed out waiting for notification from popup"}))):(logger.error("an error was sent from the popup, closing window",err),err)})))}let SharedLibraryService=class SharedLibraryService{constructor(){}static{this.ctorParameters=()=>[]}};SharedLibraryService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],SharedLibraryService);let SharedLibraryComponent=class SharedLibraryComponent{constructor(){}ngOnInit(){}static{this.ctorParameters=()=>[]}};SharedLibraryComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"lib-shared-library",template:"\n    <p>\n      shared-library works!\n    </p>\n  ",standalone:!1})],SharedLibraryComponent);let SharedLibraryModule=class SharedLibraryModule{};SharedLibraryModule=(0,tslib_es6.Cg)([(0,core.NgModule)({declarations:[SharedLibraryComponent],imports:[],exports:[SharedLibraryComponent]})],SharedLibraryModule)}}]);